import{g as Ko,w as I,d as E,a as b,b as qo,F as Xo,l as le,V as hn,c as F,o as Fe,T as gt,S as G,i as N,s as x,e as wt,f as C,h as f,j as A,k as v,u as Ct,m as St,n as At,t as p,p as m,q as T,r as bn,v as Ue,x as W,y as q,z as vs,A as Me,B as _e,C as Q,D as ee,E as M,G as O,H as k,I as ve,J as it,K as at,L as Ve,M as z,N as ze,O as ge,P as U,Q as Tt,R as We,U as He,W as ue,X as Zo,Y as R,Z as lt,_ as Yo,$ as Jo,a0 as ne,a1 as ct,a2 as pt,a3 as ut,a4 as dt,a5 as Qo,a6 as Te,a7 as er,a8 as ke,a9 as $t,aa as tr,ab as De,ac as _n,ad as nr,ae as Ht}from"./vendor-201a5563.js";const sr=()=>{const e=new Map;return Object.freeze({on:(o,r)=>{const i=e.get(o);i?i.push(r):e.set(o,[r])},off:(o,r)=>{const i=e.get(o);i&&e.set(o,i.filter(l=>l!==r))},emit:(o,r)=>{const i=e.get(o);i&&i.forEach(l=>l(r))}})},Y=sr(),or="data-smartsupp-id",Rt=()=>window.top??window.parent,re=()=>window.parent,Pe=()=>re().document,Pg=e=>e&&e.ownerDocument||document,rr=({vid:e})=>{const t=re().smartsupp||{};t.vid=e,re().smartsupp=t},ir="debug",ar=e=>{try{const t=re().localStorage.getItem(ir);if(!t)return!1;if(t===e||t==="*")return!0;const s=e.match(/^\w+:/g);return s?t===`${s[0]}*`:!1}catch{return!1}},lr=(e,t)=>(s,...n)=>{ar(e)&&console.debug(`%c${e}`,`color: ${t};`,s,...n)},J=lr("smartsupp:widget","#1233df"),cr=()=>{let e=null;const t=[];return Object.freeze({init:r=>{e=r,J("widget options",r),t.forEach(i=>i(r))},getOptions:()=>{if(!e)throw new Error("Widget options not initialized");return e},awaitOptions:async()=>e||new Promise(r=>{t.push(r)})})},P=cr(),ur=e=>{const s=e.document.getElementsByTagName("body")[0].getAttribute(or);if(!s)throw new Error("Missing chat ID attribute on body element.");if(!e.parent.$smartsupp)throw new Error("Something went wrong. Seems like loader.js did not initialize widget.");if(!e.parent.$smartsupp.getWidget)throw new Error("Get widget function was not supplied by loader.js.");return e.parent.$smartsupp.getWidget(s)},ws=e=>(t,...s)=>{e(`[Smartsupp] ${t}`,...s)},te=ws(console.warn),de=ws(console.error),dr="ssupp",Cs=()=>{const{key:e}=P.getOptions();return`${dr}_${e}`},jt=()=>{try{const e=window.localStorage.getItem(Cs())??"{}";return JSON.parse(e)}catch{return{}}},Ss=e=>{try{window.localStorage.setItem(Cs(),JSON.stringify(e))}catch(t){te("Set to local storage failed",t)}},fr=(e,t)=>{const n={...jt(),[e]:String(t)};Ss(n)},As=e=>{const t=jt();t[e]&&(delete t[e],Ss(t))},Se=e=>jt()[e],Ie=({name:e,value:t})=>{fr(e,t)},gr=e=>{As(e)};var Z=(e=>(e.AnalyticsConsent="analyticsConsent",e.AuthForm="authForm",e.IsMessengerFrameExpanded="isMessengerFrameExpanded",e.IsMessengerFrameOpened="opened",e.MarketingConsent="marketingConsent",e.Message="message",e.RatingText="ratingText",e.SoundsEnabled="enableSounds",e.TranscriptForm="transcriptForm",e.VisitorId="vid",e.Visits="visits",e))(Z||{});Y.on("analyticsConsentChanged",e=>{Ie({name:Z.AnalyticsConsent,value:String(e)})});Y.on("marketingConsentChanged",e=>{Ie({name:Z.MarketingConsent,value:String(e)})});const yn=()=>!!P.getOptions().consentModeEnabled,Kt=()=>{const e=Se(Z.AnalyticsConsent)==="true";return!(yn()&&!e)},Ts=()=>{const e=Se(Z.MarketingConsent)==="true";return!(yn()&&!e)},pr=()=>{const{storageUrl:e,key:t}=P.getOptions();if(!e)throw new Error("Storage url is missing");return`${e.replace(/{key}/g,t)}/index.html`},mr=()=>{let e=null;return Object.freeze({getStorage:()=>{if(e)return e;try{const n=pr();return e=Ko(n),J("cross domain storage created",n),e}catch{throw new Error("Cross domain storage create failed")}},closeStorage:()=>{e&&(e.close(),J("cross domain storage closed"))}})},vn=mr(),hr=e=>{const t=vn.getStorage();return new Promise((s,n)=>{t.get(e,(o,r)=>o?n(o):(J("get from cross domain storage",e,r),s(r)))})},br=(e,t)=>{const s=vn.getStorage();return new Promise((n,o)=>{s.set(e,t,r=>r?o(r):(J("set to cross domain storage",e,t),n()))})},_r=()=>{vn.closeStorage()},Es=()=>!!P.getOptions().crossDomainEnabled,yr=async()=>Es()?hr(Z.VisitorId):Se(Z.VisitorId)||null,vr=async e=>Es()?br(Z.VisitorId,String(e)):Ie({name:Z.VisitorId,value:String(e)}),wr=()=>{if(Ts())return Se(Z.Visits)?Number(Se(Z.Visits)):0},Cr=e=>{Ts()&&Ie({name:Z.Visits,value:String(e)})};Y.on("marketingConsentChanged",e=>{e||gr(Z.Visits)});const Sr=(e,t,s)=>{const{set:n,subscribe:o}=I(t,i=>{const l=Se(e);l&&i(s?s(l):l)}),r=i=>{Ie({name:e,value:String(i)})};return{set:i=>{r(i),n(i)},subscribe:o}},ye=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Ar=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Tr=450,Er=500,qt=I(null),Mr=I({width:re().innerWidth,height:re().innerHeight}),Le=E([qt,Mr],([e,t])=>{if(e){const{isMobile:s,isTablet:n}=e;if(n)return!1;if(s)return!0}return t.width<Tr||t.height<Er}),Or=E([qt],([e])=>!!(e!=null&&e.isDesktop)&&!Ar()),$g=E([qt],([e])=>!!(e!=null&&e.isTablet)),kr=()=>{const e=I({}),{subscribe:t,update:s}=e;return{subscribe:t,add:i=>{s(l=>({...l,[i.id]:i}))},remove:i=>{s(l=>{const{[i]:a,...c}=l;return c})},find:i=>b(e)[i]||null}},Gt=kr(),Gg=E([Gt],([e])=>Object.values(e)),wn=e=>(t,s=3e3)=>{const n=`fm-${e}-${t}`,o=Gt.find(n);let r=1;o&&(clearTimeout(o.timeout),r=o.recurrence+1);let i;return s>0&&(i=window.setTimeout(()=>{Kn(n)},s)),Gt.add({id:n,type:e,text:t,timeout:i,recurrence:r}),()=>Kn(n)},Kn=e=>{Gt.remove(e)},Ng=wn("success"),Oe=wn("error"),Nt=wn("warning");var Ms=(e=>(e[e.Good=5]="Good",e[e.Normal=3]="Normal",e[e.Bad=1]="Bad",e))(Ms||{});const Fr={[5]:{value:5,emoji:"😍",text:"agentRating.good.formText",name:"good"},[3]:{value:3,emoji:"😐",text:"agentRating.normal.formText",name:"neutral"},[1]:{value:1,emoji:"😞",text:"agentRating.bad.formText",name:"bad"}},xg=Object.values(Fr).sort((e,t)=>t.value-e.value),Os=I(null),ks=I(null),Ir=I(!1),Cn=I([]),Lr=e=>{Cn.update(t=>[...t,e])},Rr=()=>{let e;return Cn.update(t=>(e=t.pop(),t)),e??null},Br=()=>b(Cn).length===0,Fs=(e,{useStack:t=!1}={})=>{ks.update(s=>(t&&s&&Lr(s),Ir.set(s!==null),e))},Is=()=>{let e=null;Br()||(e=Rr()),ks.set(e)};var Sn=(e=>(e[e.Options=0]="Options",e[e.GdprAndPrivacy=1]="GdprAndPrivacy",e[e.AuthForm=2]="AuthForm",e[e.Transcript=3]="Transcript",e[e.CloseChat=4]="CloseChat",e[e.ChatRating=5]="ChatRating",e))(Sn||{});const Dr=()=>{const{subscribe:e,update:t}=I(new Set);return{subscribe:e,hideRepliesByMessageId:n=>{t(o=>o.add(n))}}},Pr=Dr(),Ug=500,Vg=1e3,zg=Symbol("contentListItem"),Wg=Symbol("contentMessageAttachment"),Hg="-replies",$r=.35,Gr=5e3,Nr="default",An=(e,t)=>{const s={};for(const n of t){const o=String(n[e]);s[o]=n}return s},xr=()=>{const e=I({}),{subscribe:t,set:s}=e;return{subscribe:t,setGroups:o=>{s(An("key",o))}}},Tn=xr(),Ls=E([Tn],([e])=>Object.values(e)),se={authFormDrawer:"authFormDrawer",authFormPrivacyNotice:"authFormPrivacyNotice",authFormPrivacyNoticeSwitch:"authFormPrivacyNoticeSwitch",authFormSubmitButton:"authFormSubmitButton",avatarAgent:"avatarAgent",avatarBot:"avatarBot",avatarGroup:"avatarGroup",avatarInfo:"avatarInfo",buttonAttachment:"buttonAttachment",buttonCloseChat:"buttonCloseChat",buttonCloseDrawer:"buttonCloseDrawer",buttonCollapseChat:"buttonCollapseChat",buttonEmoji:"buttonEmoji",buttonExpandChat:"buttonExpandChat",buttonMinimizeChat:"buttonMinimizeChat",buttonOptions:"buttonOptions",buttonSend:"buttonSend",chatRatingDrawer:"chatRatingDrawer",chatRatingEmojiButton:"chatRatingEmoji",chatRatingSendButton:"chatRatingSendButton",chatRatingTextarea:"chatRatingTextarea",closeChatConfirmButton:"closeChatConfirmButton",closeChatDeclineButton:"closeChatDeclineButton",closeChatDrawer:"closeChatDrawer",gdprDrawer:"gdprDrawer",messageAgent:"messageAgent",messageBot:"messageBot",messageBotReply:"messageBotReply",messageBotBack:"messageBotBack",messageContact:"messageContact",messageFile:"messageFile",messageGroup:"messageGroup",messageImage:"messageImage",optionsDrawer:"optionsDrawer",optionsFeedback:"optionsFeedback",optionsPrivacyNotice:"optionsPrivacyNotice",optionsSounds:"optionsSounds",optionsTranscript:"optionsTranscript",systemMessage:"systemMessage",textarea:"textarea",textareaPreviewFile:"textareaPreviewFile",textareaPreviewImage:"textareaPreviewImage",transcriptDrawer:"transcriptDrawer",transcriptInput:"transcriptInput",transcriptSendButton:"transcriptSend",widgetButton:"widgetButton",widgetButtonFrame:"widgetButtonFrame",widgetButtonText:"widgetButtontext",widgetImagePreview:"widgetImagePreview",widgetMessenger:"widgetMessenger",widgetMessengerFrame:"widgetMessengerFrame",widgetOnlineBadge:"widgetOnlineBadge",widgetPopupFrame:"widgetPopupFrame",widgetTypingFrame:"widgetTypingFrame",widgetUnreadMessagesBadge:"widgetUnreadMessagesBadge"},jg="https://www.smartsupp.com",Kg="/powered-by-smartsupp",qg=["cs","es","fr","hu","it","de","nl","pl"],Ur="3.0",Xt={Widget:"widget",Web:"web",Other:"other"},Vr=()=>{const{protocol:e,host:t}=P.getOptions();return`${e==="http"?"http":"https"}://${t}`},zr=async()=>{try{return await yr()}catch(e){return te(String(e)),null}},Wr=async e=>{try{await vr(e),_r()}catch(t){te(String(t))}},Hr=async()=>{const{key:e,lang:t,isPreviewMode:s,sitePlatform:n,triggerable:o,_chatMaxReopenTime:r}=P.getOptions(),i=await zr(),l=b(xn);return{key:e,id:i,isPreviewMode:s,sitePlatform:n,triggerable:o,_chatMaxReopenTime:r,name:l.name,email:l.email,phone:l.phone,group:l.group,lang:l.language??t,variables:l.variables,widgetVersion:Ur,visits:wr(),isWidgetVisible:b(Xe),isWidgetOpen:b(Ce),pageUrl:Rt().location.href,pageTitle:Rt().document.title,domain:Rt().location.hostname||"unknown",referer:Rt().document.referrer,bundleVersion:"490c3f584e1b011815a0c2fde7d112c4e4fbac4d"}},jr=()=>{const e=I(),{subscribe:t,set:s}=e;return{subscribe:t,initialize:o=>s(o)}},Rs=jr(),vt=5,Kr="FILE",Xg=2e3,Zg=e=>e.split("/")[0]==="image",Yg=e=>!!e.match(/^video\/(?:mp4|webm|ogg){1}$/);async function qr(e){if(!FileReader)return de("FileReader not supported"),null;const t=new FileReader;return new Promise(s=>{t.onload=()=>{if(!t.result){s(null);return}let n;typeof t.result=="string"?n=t.result:n=t.result.toString(),n.startsWith("data:image")||(n=null),s(n)},t.onerror=()=>{de("Failed to load image data"),s(null)},t.readAsDataURL(e)})}async function Xr(e){return new Promise(t=>{const s=document.createElement("img");s.onload=()=>{t({width:s.width,height:s.height})},s.onerror=()=>{de("Failed to obtain image dimensions"),t(null)},s.src=e})}function Zr(e){return{horizontal:e.width>e.height,vertical:e.height>e.width}}const Yr="ar",Jr="az",Qr="bg",ei="br",ti="bs",ni="ca",si="cn",oi="cs",ri="da",ii="de",ai="el",Bs="en",li="es",ci="fa",ui="fi",di="fil",fi="fr",gi="he",pi="hi",mi="hr",hi="hu",bi="is",_i="it",yi="ja",vi="ka",wi="lt",Ci="lv",Si="mk",Ai="nl",Ti="no",Ei="pl",Mi="pt",Oi="ro",ki="ru",Fi="sk",Ii="sl",Li="sr",Ri="sv",Bi="th",Di="tr",Pi="tw",$i="uk",Ds=Bs,Gi=[Yr,Jr,Qr,ei,ti,ni,si,oi,ri,ii,ai,Bs,li,ci,ui,di,fi,gi,pi,mi,hi,bi,_i,yi,vi,wi,Ci,Si,Ai,Ti,Ei,Mi,Oi,ki,Fi,Ii,Li,Ri,Bi,Di,Pi,$i],Ps=e=>Gi.includes(e),Ni=e=>Ps(e)?e:Ds,xi=()=>{const{lang:e}=P.getOptions(),{language:t}=b(xn);return Ni(t??e)};function Ui(){return new qo.WidgetTranslationsClient(new Xo({baseURL:`${P.getOptions().translationsBaseUrl}/api/v1`}))}const Vi=async e=>Ui().getDefaults(e),zi=(e,t)=>{const{translates:s}=P.getOptions();return{...e,...s[t]&&s[t]}},En=I(Ds),Mn=I({}),$s=async e=>{try{const t=await Vi(e),s=zi(t,e);Mn.update(n=>({...n,[e]:s}))}catch{de(`Fetch translations of '${e}' language failed.`)}},Wi=async e=>{b(Mn)[e]||await $s(e),En.set(e)},Hi=async()=>{const e=xi();En.set(e),await $s(e)},ji=(e,t,s)=>{var i;const n=b(Mn),o=`|${t}|`;if(Object.keys(n).length===0)return o;let r=((i=n[e])==null?void 0:i[t])||o;return Object.keys(s).map(l=>{const a=new RegExp(`{${l}}`,"g");r=r.replace(a,s[l])}),r},ce=E(En,e=>(t,s={})=>ji(e,t,s)),Ki=()=>{const e=I([]),{subscribe:t,update:s}=e,n=()=>b(e).map(w=>w.file),o=(w,_)=>(_||b(e)).find(B=>B.file.name===w)||null,r=w=>({file:w,preview:{},previewState:"none",uploadStatus:"none"}),i=w=>{const _=Array.isArray(w)?w:[w];s(B=>B.length+_.length>vt?(Oe(`${b(ce)("fileUpload.tooManyFiles")} ${vt}`),B):[...B,..._.map(r)]),S(_)},l=w=>{s(_=>_.filter(B=>B.file!==w))},a=()=>b(e).length,c=()=>a()>=vt,d=()=>e.set([]),u=()=>{e.update(w=>(w.forEach(_=>_.uploadStatus="in-progress"),w))},g=w=>{e.update(_=>{const B=o(w,_);return B&&(B.uploadStatus="done"),_})},y=w=>{var _;return((_=o(w.name))==null?void 0:_.previewState)!=="none"},S=w=>{w.forEach(_=>void h(_))},h=async w=>{if(y(w))return;const _=await qr(w),B=_?await Xr(_):null,$=B?Zr(B):null;e.update(D=>{const L=o(w.name,D);return L?(L.previewState="ready",L.preview={data:_,dimensions:B,orientation:$},[...D]):D})};return{subscribe:t,getFiles:n,find:o,add:i,remove:l,count:a,isLimitReached:c,clear:d,setUploadingStatus:u,setFileUploaded:g}},$e=Ki(),qi=()=>{const e=[];return Object.freeze({push:n=>{e.push(n)},executeAll:()=>{for(;e.length>0;){const n=e.shift();n&&n()}}})},Et=qi(),On=I(!1),Xi=e=>{J("init data",e),On.set(!0);const t=e.visitor.id;Wr(t),Cr(e.visitor.visits),we.setVisitorData(e.visitor),rr({vid:t}),qt.set(e.browser),mt.setAgents(e.account.agents),Tn.setGroups(e.account.groups),bt.set(e.account.status),e.chat&&(Re.set(e.chat.status),Mt(e.chat.isClosed),Yt.set(e.chat.unreadInfo.lastReadAt),X.setMessages(e.chat.messages),je.setAssignedAgentIds(e.chat.assignedIds??[]),e.chat.widgetOptions&&ht.updateGeneralOptions(e.chat.widgetOptions)),Rs.initialize(e.fileUpload),me.set(!0),Et.executeAll()},Zi=e=>{console.error(e)},Yi=()=>{On.set(!1)},Ji=()=>{Re.set(le.ChatStatus.Open)},Qi=()=>{Re.set(le.ChatStatus.Served),Mt(!1)},ea=({message:e})=>{e.content.data.closeType==="agent_close"&&(Ra(),je.setAssignedAgentIds([]),Re.set(le.ChatStatus.Closed),X.addMessage(e),Y.emit("chatClosed",e))},ta=({message:e})=>{Mt(!0,{byVisitor:!0}),X.addMessage(e),Y.emit("chatVisitorClosed",e)},na=({changes:e})=>{e.widgetOptions&&ht.updateGeneralOptions(e.widgetOptions),e.isClosed!==void 0&&Mt(e.isClosed)},sa=({message:e})=>{Vs.set(!1);const t=b(nu)&&kn(e);!b(Ce)&&Ks(e)&&!t?al(e):X.addMessage(e),js(),e.widgetOptions&&ht.setMessageOptions(e.widgetOptions),t&&en(),Y.emit("messageReceived",e)},oa=({message:e})=>{X.replaceMessage(e),e.widgetOptions&&e.id===b(ul)&&ht.setMessageOptions(e.widgetOptions)},ra=({message:e,agent:t})=>{je.addAssignedAgentId(e.content.data.agentId),X.addMessage(e),Y.emit("agentJoined",t)},ia=({message:e})=>{je.removeAssignedAgentId(e.content.data.agentId),X.addMessage(e)},aa=({message:e})=>{je.addAssignedAgentId(e.content.data.assigned),X.addMessage(e)},la=({message:e})=>{je.removeAssignedAgentId(e.content.data.unassigned),X.addMessage(e)},ca=e=>{Vs.set(e.typing.is)},ua=e=>{Yt.set(e.lastReadAt)},da=({message:e,rating:t})=>{X.updateMessageRating(e.id,t),Y.emit("chatRated",t)},fa=({id:e,changes:t})=>{mt.updateAgent(e,t)},ga=({id:e,status:t})=>{mt.updateAgent(e,{status:t})},pa=({status:e})=>{bt.set(e)},ma=e=>{we.updateVisitorData(e)},ha=async e=>{const t=await P.awaitOptions(),s={data:e,connection:{url:Vr(),balancerUrl:t.balancerUrl,options:{path:"/socket",autoConnect:!1,reconnection:!0}}};return new hn(s)},ba=()=>{let e=null;return Object.freeze({getClient:()=>{if(!e)throw new Error("Visitor client is not initialized");return e},initClient:async()=>{const o=await Hr();e=await ha(o),e&&(_a(e),await e.connect().catch(r=>{de("Failed connect to server.",r)}))},isInitialized:()=>!!e})},_a=e=>{e.on("initialized",Xi),e.on("error",Zi),e.on("disconnect",Yi),e.on("chat.opened",Ji),e.on("chat.served",Qi),e.on("chat.closed",ea),e.on("chat.visitor_closed",ta),e.on("chat.updated",na),e.on("chat.message_received",sa),e.on("chat.message_updated",oa),e.on("chat.agent_joined",ra),e.on("chat.agent_left",ia),e.on("chat.agent_assigned",aa),e.on("chat.agent_unassigned",la),e.on("chat.agent_typing",ca),e.on("chat.contact_read",ua),e.on("chat.rated",da),e.on("agent.updated",fa),e.on("agent.status_updated",ga),e.on("account.updated",pa),e.on("visitor.updated",ma)},ie=ba(),ya=()=>{const e=I(null),{subscribe:t,set:s,update:n}=e,o=a=>{s(a)},r=a=>{n(c=>c?{...c,...a}:null)};return{subscribe:t,setVisitorData:o,updateVisitorData:r,updateVisitorProperty:(a,c)=>{if(!b(me)){fn(a,c);return}r({[a]:c});try{ie.getClient().update({[a]:c})}catch(d){de(`Update of visitor property '${a}' failed.`,String(d))}},updateVisitorVariables:a=>{if(!b(me)){fn("variables",a);return}const c=b(e);if(!c)return;const d=c.variables;r({variables:{...d,...a}});let u={};if(Object.keys(a).forEach(g=>{a[g]!==d[g]&&(u={...u,[g]:a[g]})}),Object.keys(u).length!==0)try{ie.getClient().update({variables:u})}catch(g){de("Update of visitor variables failed.",String(g))}}}},we=ya(),va=(e,t)=>e.hasOwnProperty(t),Gs=e=>typeof e=="boolean",wa=e=>typeof e=="number",Ns=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),xe=e=>typeof e=="string"||e instanceof String,qn=e=>xe(e)||wa(e)||Gs(e),Ca=e=>{const t={};return Object.keys(e).forEach(s=>{const n=e[s];qn(n)?t[s]=n:Ns(n)&&va(n,"value")&&qn(n.value)&&(t[s]=n.value)}),t},Sa=()=>{const e=I({}),{update:t,subscribe:s,set:n}=e;return{subscribe:s,setAgents:l=>{n(An("id",l))},addAgent:l=>{t(a=>({...a,[l.id]:l}))},updateAgent:(l,a)=>{t(c=>c[l]?{...c,[l]:{...c[l],...a}}:c)}}},mt=Sa(),Aa=e=>E([mt],([t])=>t[e]??null),Ta=E([mt],([e])=>Object.values(e).filter(t=>!t.disabled)),xs=E([Ta,we],([e,t])=>{const s=t==null?void 0:t.group;return!s||s===Nr?e:e.filter(n=>n.groups.length===0||n.groups.includes(s))}),Ea=E([xs],([e])=>e.filter(t=>t.status===le.AgentStatus.Online)),Ma=e=>{if(e)return`${e}?size=80`;const{widgetV3Url:t}=P.getOptions();return`${t}/assets/images/default-avatar.png`},Oa=()=>{const e=I([]),{subscribe:t,set:s,update:n}=e;return{subscribe:t,setAssignedAgentIds:l=>{s(l)},addAssignedAgentId:l=>{n(a=>[...new Set([...a,l])])},removeAssignedAgentId:l=>{n(a=>a.filter(c=>c!==l))}}},je=Oa(),Zt=E([je,mt],([e,t])=>e.map(s=>t[s]).filter(Boolean)),Jg=E([Zt],([e])=>e.length>0),ka=E([Zt],([e])=>e.filter(t=>!t.disabled));E([Zt],([e])=>e.some(t=>t.status===le.AgentStatus.Online));const Fa=()=>{const e=I({disableAttachments:!1,disableAuthentication:!1,disableInput:!1}),t=I({}),s=r=>{e.update(i=>({...i,...r}))},n=r=>{t.set(r)};return{subscribe:E([e,t],([r,i])=>({...r,...i})).subscribe,updateGeneralOptions:s,setMessageOptions:n}},ht=Fa();var Us=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e[e.ClosedByVisitor=2]="ClosedByVisitor",e))(Us||{});const bt=I(le.AccountStatus.Offline),Re=I(null),xt=I(0),Vs=I(!1),Yt=I(null),zs=E([Re],([e])=>e===le.ChatStatus.Pending),Ia=E([Re],([e])=>e===le.ChatStatus.Served),Qg=E([Ia,xt],([e,t])=>e&&t===0),Mt=(e,{byVisitor:t=!1}={})=>{e?xt.set(t?2:1):xt.set(0)},Ws=E([bt,ka],([e,t])=>t.length===0?e===le.AccountStatus.Online:t.some(s=>s.status===le.AgentStatus.Online)),La=E([ht],([e])=>e.disableAuthentication),Hs=()=>{Yt.set(new Date().toISOString()),ie.getClient().chatRead()},js=()=>{const e=Pe().visibilityState==="visible";!b(cl)||!b(Ce)||!e||Hs()},ep=async()=>{if(Mt(!0,{byVisitor:!0}),ie.getClient().chatClose(),so()){const e=await oo();if(!e)return;X.addMessage(e.message),gl(e.message.id)}else un(),Is()},Ra=async()=>{const e=b(Re)===le.ChatStatus.Served,t=b(xt)!==Us.Open;if(!so()||!e||t)return;const s=await oo();s&&X.addMessage(s.message)};function Ot(e){return e.length===0?null:e[e.length-1]}const Ba=e=>e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase(),Da=e=>{let t=e,s=0;const n=["B","KB","MB","GB"];for(;t>=1024&&s<n.length-1;)t/=1024,s++;return{size:Math.floor(t),unit:n[s]}},tp=e=>{const t=e.split("."),s=Ot(t);return s?s.toUpperCase():Kr},np=(e,t)=>`${e}?name=${t}`,Pa=async(e,t)=>{const s=ie.getClient(),n=[];for(const{file:o}of e){const r=await s.chatUploadInit(),i=new FormData;i.append("file",o,o.name);try{if(!(await fetch(r.url,{method:"post",body:i})).ok)throw new Error("Upload failed");n.push(r.token)}catch{de(`File [${o.name}] upload failed`),Oe("fileUpload.filesWerentProcessed")}finally{t(o)}}return n},$a=async e=>{const t=ie.getClient();try{await t.chatUploadFinish(e)}catch{de(`Failed to finish file upload for ${e}`)}},Xn=6e4,Zn=e=>Math.floor(e/Xn)*Xn,Ga=(e,t)=>Zn(new Date(e).getTime())===Zn(new Date(t).getTime()),Na=(e,t)=>{const s=new Date(e),n=new Date(t);return s.getDate()===n.getDate()&&s.getMonth()===n.getMonth()&&s.getFullYear()===n.getFullYear()},sp=(e,t)=>e.getTime()-t.getTime(),xa=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}),Ua=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),op=e=>Na(new Date,e)?xa:Ua,Va=()=>typeof Intl<"u"&&"RelativeTimeFormat"in Intl,za=e=>Va()?new Intl.RelativeTimeFormat(e,{numeric:"auto"}):null,Wa=[{unit:"year",amount:31536e6},{unit:"month",amount:2628e6},{unit:"day",amount:864e5},{unit:"hour",amount:36e5},{unit:"minute",amount:6e4},{unit:"second",amount:1e3}],rp=(e,t)=>{const s=za(t);if(!s)return te("Relative time format not supported"),"";for(const{unit:n,amount:o}of Wa){if(n==="second")return s.format(0,"second");if(Math.abs(e)>o)return s.format(Math.round(e/o),n)}return""},Ha=(e,t=300)=>{let s;return(...o)=>{s||(e(...o),s=setTimeout(()=>s=null,t))}};var be=(e=>(e.ContactMessage="contact-message",e.AgentMessage="agent-message",e.BotMessage="bot-message",e.BotReplies="bot-replies",e))(be||{}),Ge=(e=>(e.Automessage="automessage",e.Chatbot="chatbot",e.Trigger="trigger",e))(Ge||{});const Yn=async({text:e,quickReply:t})=>{try{return await ie.getClient().chatMessage({content:{type:F.MessageContentType.Text,text:e},quickReply:t})??null}catch{return null}},kn=e=>e.subType===F.MessageSubType.Bot||e.subType===F.MessageSubType.Trigger,Ks=e=>e.subType===F.MessageSubType.Agent||kn(e),ja=(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),qs=(e,t)=>t===be.BotReplies?`${e.id}-replies`:e.id,Xs=e=>{const t={isRight:!1,isLeft:!1},s={isPrimary:!1,isSecondary:!1};switch(e){case be.ContactMessage:t.isRight=!0,s.isPrimary=!0;break;default:t.isLeft=!0,s.isSecondary=!0}return{align:t,variant:s}},Ka=e=>!!e.agentId||e.subType===F.MessageSubType.Bot,Zs=(e,t)=>e.subType===F.MessageSubType.System||t===be.BotReplies,qa=(e,t)=>{const s=[];let n=null,o=null;for(const r of e){n&&!el(r,n,t.has(r.id))&&(s.push(n),n=null,o=null),n=n||Xa(r);const i=Jn(r,n);if(o){const a=Qs(o),c=Ys(o);i.neighbors.hasTop=a,c.any.neighbors.hasBottom=a,c.attachmentContext&&(c.attachmentContext.extraSpaces.hasBottom=Bt(c.attachmentContext.attachment))}const l=Ja(r);if(l&&Ya(l,i,o),n.messagesContext.push(i),o=i,kn(r)&&rl(r)){s.push(n);const a=Za(r);a.messagesContext.push(Jn(r,a)),s.push(a),n=null}}return n&&s.push(n),s},Xa=e=>{const t=Js(e),s=e.subType===F.MessageSubType.Bot||e.subType===F.MessageSubType.Trigger,{align:n,variant:o}=Xs(t);return{type:t,isBot:s,id:qs(e,t),date:e.createdAt,agentId:e.agentId,align:n,variant:o,messagesContext:[],showAvatar:Ka(e),useFullWidth:Zs(e,t)}},Za=e=>{const t=be.BotReplies,{align:s,variant:n}=Xs(t);return{type:be.BotReplies,isBot:!0,id:qs(e,t),date:e.createdAt,agentId:e.agentId,align:s,variant:n,messagesContext:[],showAvatar:!1,useFullWidth:Zs(e,t)}},Jn=(e,t)=>({group:t,message:e,neighbors:{hasTop:!1,hasBottom:!1},attachmentsContext:[]}),Ya=(e,t,s)=>{let n=null;for(const o of e){const r=Qn(o),i={hasTop:!1,hasBottom:!1},l=Bt(o),a={hasTop:l,hasBottom:!1};if(n){const d=Qn(n.attachment),u=Bt(n.attachment);n.neighbors.hasBottom=d&&r,i.hasTop=d&&r,n.extraSpaces.hasBottom=!l&&u}else if(t.neighbors.hasBottom=r,i.hasTop=r,Qa(t.message))if(i.hasTop=!1,t.neighbors.hasTop=!1,t.neighbors.hasBottom=!1,s){const d=Qs(s),u=Ys(s);i.hasTop=d&&r,u.any.neighbors.hasBottom=d&&r;const g=u.attachmentContext;g&&(g.extraSpaces.hasBottom=!l&&Bt(g.attachment))}else a.hasTop=!1;const c={attachment:o,neighbors:i,extraSpaces:a,messageContext:t};t.attachmentsContext.push(c),n={...c}}},Ys=e=>{const t=Ot(e.attachmentsContext)||void 0;return{attachmentContext:t,any:t||e}},Ja=e=>{var t;return e?((t=e.content)==null?void 0:t.type)===F.MessageContentType.Upload?[e.content.data]:e.attachments:[]},Qa=e=>!e.content.text,el=(e,t,s)=>{const n=Js(e),o=n===be.AgentMessage&&e.agentId===t.agentId,r=n===be.ContactMessage,i=e.subType!==F.MessageSubType.Bot||(e.content.quickReplies||[]).length===0||s;return t.type===n&&(o||r)&&i&&Ga(t.date,e.createdAt)},Js=e=>{switch(e.subType){case F.MessageSubType.Agent:return be.AgentMessage;case F.MessageSubType.Contact:return be.ContactMessage;case F.MessageSubType.Bot:return be.BotMessage}return null},Qs=e=>{const t=e.attachmentsContext.length;return!(t>0&&e.attachmentsContext[t-1].attachment.type===F.AttachmentType.File)},Qn=e=>e.type!==F.AttachmentType.File,Bt=e=>!!e&&e.type===F.AttachmentType.File,eo=()=>{const e=mc();e.volume=$r,e.addEventListener("canplaythrough",()=>{e.play().catch(t=>te("Could not play message sound.",t))})},tl=Ha(eo,Gr),nl=e=>e.filter(t=>t.type===F.MessageType.Message&&(t.subType===F.MessageSubType.Agent||t.subType===F.MessageSubType.Contact)),sl=(e,t=!0)=>{const s=e.reduce((n,o)=>(n.push(o),o.content.type===F.MessageContentType.ChatClose||o.content.type===F.MessageContentType.ChatVisitorClose?[]:n),[]);return t?s.filter(n=>n.type===F.MessageType.Message&&n.subType!==F.MessageSubType.System):s},ol=e=>{const t={};return e.forEach(s=>{var n;if(s.trigger){let o=Ge.Automessage;s.subType===F.MessageSubType.Trigger?o=Ge.Trigger:s.subType===F.MessageSubType.Bot&&s.content.quickReplies&&(o=Ge.Chatbot),t[((n=s.trigger)==null?void 0:n.id)||""]={type:o,sent:!0}}}),t},rl=e=>!!(e.content.quickReplies&&e.content.quickReplies.length>0),il=()=>{const e=I({}),{subscribe:t,update:s,set:n}=e,o=d=>{n(An("id",d))},r=d=>{s(u=>({...u,[d.id]:d})),ll(d)},i=d=>{s(u=>({...u,[d.id]:d}))};return{subscribe:t,setMessages:o,addMessage:r,replaceMessage:i,updateMessageRating:(d,u)=>{s(g=>{const y=g[d];if(!y||y.content.type!=="rate_form")return{...g};const S={...y,content:{...y.content,data:{value:u.value,text:u.text??void 0}}};return{...g,[d]:S}})},sendMessage:async(d,u)=>{const g=await Yn({text:d});g&&(i(g),Y.emit("messageSent",g),dc(b(bt))),await Promise.all(u.map(y=>$a(y)))},sendBotReply:async(d,u,g)=>{const y=await Yn({text:u,quickReply:{replyTo:d,payload:g}});g.isGoBackButton||Xl(u),y&&i(y)}}},X=il(),al=e=>{iu(),setTimeout(()=>{X.addMessage(e),Co()},1600)},ll=e=>{e&&b(Ut)&&b(Xe)&&!(b(po)&&b(Ce))&&hc(e)&&tl()},Fn=E([X,Yt],([e,t])=>{const s=Object.values(e).filter(Ks);return t?s.filter(n=>new Date(n.createdAt)>new Date(t)):s}),In=E([Fn],([e])=>Ot(e)),to=E([Fn],([e])=>e.length),cl=E([to],([e])=>e>0),Ke=E([X],([e])=>Object.values(e).sort(ja)),ip=E([Ke,Pr],([e,t])=>qa(e,t)),ul=E([Ke],([e])=>{const t=Ot(e);return(t==null?void 0:t.id)??null}),ap=E([X],([e])=>{var n;const t=Object.values(e).filter(o=>{var r;return typeof((r=o.widgetOptions)==null?void 0:r.disableInput)=="boolean"}),s=Ot(t);return((n=s==null?void 0:s.widgetOptions)==null?void 0:n.disableInput)??!1}),no=E([X],([e])=>Object.values(e).filter(t=>t.subType==="contact"||t.subType==="agent").length>0),dl=E([X],([e])=>Object.values(e).filter(t=>t.subType===F.MessageSubType.Contact).length>0),lp=E([X,Os],([e,t])=>{var n,o;if(!t)return null;const s=e[t]??null;return!s||s.content.type!=="rate_form"?null:{messageId:s.id,value:(n=s.content.data)==null?void 0:n.value,text:(o=s.content.data)==null?void 0:o.text}}),fl=E([Ke],([e])=>e.slice().reverse().find(s=>s.subType===F.MessageSubType.Contact)||null),so=()=>!!P.getOptions().ratingEnabled,gl=e=>{Os.set(e),Fs(Sn.ChatRating)},oo=async()=>{try{return await ie.getClient().chatRateInit()}catch(e){de("Init chat rating failed.",String(e)),Oe(b(ce)("form.submit.error"))}},cp=async({messageId:e,rating:{text:t,value:s},onSuccess:n})=>{const o=b(X)[e];try{X.updateMessageRating(e,{value:s,text:t}),await ie.getClient().chatRate({messageId:e,value:s,text:t??void 0}),n&&n()}catch(r){o&&X.replaceMessage(o),de("Chat rating failed.",String(r)),Oe(b(ce)("form.submit.error"))}},st=[];let Ln=!1,j;const pl=()=>{const{googleAnalyticsEnabled:e}=P.getOptions();j=window.top||window,e&&(Y.on("analyticsConsentChanged",ml),!Ln&&Kt()&&ro())},ml=e=>{!Ln&&e?ro():io(e)},ro=()=>{const{gaKey:e,gaOptions:t}=P.getOptions();if(e)st.push({key:e,options:t,type:Xt.Widget});else try{st.push(...hl())}catch(s){const n=s instanceof Error?s.message:s;J("Error during getting GA top trackers",n)}st.length>0&&!j.gtag&&yl(),st.length!==0?(vl(st),Ln=!0,J("GA initialized")):J("No GA to setup")},hl=()=>{const e=[];if(!j.ga&&!j.google_tag_manager)throw new Error("Parent GA object is not available");return e.push(..._l()),bl().forEach(s=>{e.findIndex(o=>o.key===s.key)===-1&&e.push(s)}),e},bl=()=>{const{gaName:e}=P.getOptions(),t=[];if(j.ga){const{ga:s}=j;s(()=>{const n=s.getAll();J("topTrackers",n),n&&n.every(o=>{const r={key:o.get("trackingId"),type:Xt.Web,options:{cookieDomain:o.get("cookieDomain")||"auto",name:o.get("name")||""}};return e&&r.options&&r.options.name===e?(t.push(r),!1):(t.push(r),!0)})})}return t},_l=()=>{const e=[];return j.google_tag_manager&&Object.keys(j.google_tag_manager).forEach(s=>{s.match(/(UA-\d*-\d*)|(G-([A-Z,0-9]*))/g)&&e.push({key:s,type:Xt.Web,options:{cookieDomain:"auto",name:""}})}),e},yl=()=>{const e=j.document,{head:t}=e,s=e.createElement("script");s.id="gtag",s.type="text/javascript",s.async=!0,s.src="https://www.googletagmanager.com/gtag/js",t.insertBefore(s,t.firstChild),j.dataLayer=j.dataLayer||[],j.gtag=function(){j.dataLayer.push(arguments)},j.gtag("js",new Date),j.gtag("consent","default",{ad_storage:"denied",analytics_storage:"denied"}),io(Kt())},vl=e=>{e.forEach(t=>{const{key:s,options:n}=t;let o={};n?(o={cookie_domain:n.cookieDomain},n.name&&(o.name=n.name)):o={cookie_domain:(j==null?void 0:j.document.domain)||""},j.gtag("config",s,o)})},io=e=>{const t=e?"granted":"denied";j.gtag("consent","update",{ad_storage:t,analytics_storage:t})},wl=(e,t)=>{const{googleAnalyticsEnabled:s,gaKey:n,gaName:o}=P.getOptions();if(!(!s||!j.gtag||!Kt()||j.document.hidden))try{n?(t.send_to=n,j.gtag("event",e,t),J(`Smartsupp: GA event ${e} - ${JSON.stringify(t)}`)):o?st.forEach(r=>{const{type:i,key:l}=r;i===Xt.Web&&(t.send_to=l,j.gtag("event",e,t),J(`Smartsupp: GA event ${e} - ${JSON.stringify(t)}`))}):(j.gtag("event",e,t),J(`Smartsupp: GA event ${e} - ${JSON.stringify(t)}`))}catch(r){const i=r instanceof Error?r.message:r;J("Smartsupp: GA error:",i)}},Cl="Visitor_started_conversation",Sl="Trigger_message_sent",Al="Trigger_message_viewed",Tl="Trigger_visitor_reaction",El="Auto_message_sent",Ml="Auto_message_viewed",Ol="Auto_message_visitor_reaction",kl="Chatbot_sent",Fl="Chatbot_viewed",Il="Chatbot_interaction",Ll="Chatbot_button_interaction",Rl="Chatbot_visitor_reaction",Bl="Agent_served_conversation",Dl="Auth_form_filled",Pl="Offline_message_sent",$l="Feedback_sent",Gl="Feedback_text_sent",Nl={event_category:"Smartsupp_v3",non_interaction:!0},oe=(e,t)=>{const s={...Nl,...t};wl(e,s)},xl=(e="")=>oe(Sl,{event_label:e}),Ul=e=>oe(Al,{event_label:e}),Vl=(e="")=>oe(Tl,{event_label:e}),zl=(e="")=>oe(El,{event_label:e}),Wl=e=>oe(Ml,{event_label:e}),Hl=(e="")=>oe(Ol,{event_label:e}),jl=(e="")=>oe(kl,{event_label:e}),Kl=e=>oe(Fl,{event_label:e}),ql=(e="")=>oe(Il,{event_label:e}),Xl=(e="")=>oe(Ll,{event_label:e}),Zl=(e="")=>oe(Rl,{event_label:e}),Yl=()=>oe(Cl),Jl=e=>oe(Bl,{event_label:e}),Ql=()=>oe(Dl),ec=()=>oe(Pl),tc=(e,t)=>{const s={event_label:t||Ms[e]||"",value:e};oe(t?Gl:$l,s)};let an=!1,pe={};const ao=()=>{an=!1},nc=()=>{const e=b(Ke);pe=ol(e)},lo=e=>{var t,s;return((s=pe[((t=e.trigger)==null?void 0:t.id)||""])==null?void 0:s.type)==="chatbot"},sc=(e,t)=>an?!1:sl(e).length===1&&t===F.MessageSubType.Contact?(an=!0,!0):!1,oc=(e,t)=>{var n,o;const s=((n=e.trigger)==null?void 0:n.id)||"";return t.subType===F.MessageSubType.Contact&&e.subType===F.MessageSubType.Trigger&&!((o=pe[s])!=null&&o.visitorResponded)?(pe[s].visitorResponded=!0,!0):!1},rc=(e,t)=>{var n,o;const s=((n=e.trigger)==null?void 0:n.id)||"";return t.subType===F.MessageSubType.Contact&&!(t.groupId||t.content.quickReplies||t.content.quickReply)&&e.subType===F.MessageSubType.Bot&&!((o=pe[s])!=null&&o.visitorResponded)?(pe[s].visitorResponded=!0,!0):!1},ic=(e,t)=>{var n,o;const s=((n=e.trigger)==null?void 0:n.id)||"";return t.subType===F.MessageSubType.Contact&&lo(e)&&e.subType===F.MessageSubType.Bot&&!((o=pe[s])!=null&&o.reacted)?(pe[s].reacted=!0,!0):!1},ot=(e,t,s=!1)=>{var n;if(e.length>0&&!s){const o=e.slice(-2).filter(r=>r.trigger);return o?(n=o[o.length-1].trigger)==null?void 0:n.name:""}else return t.trigger?t.trigger.name:""},ac=e=>{const t=b(Ke);lc(t,e),cc(t,e),sc(t,e.subType)&&Yl()},lc=(e,t)=>{var o,r,i,l;const s=((o=t.trigger)==null?void 0:o.id)||"";t.subType===F.MessageSubType.Bot&&!((r=pe[s])!=null&&r.sent)&&((i=t.content)!=null&&i.quickReplies||(l=t.content)!=null&&l.quickReply?(jl(ot(e,t,!0)),pe[s]={sent:!0,type:Ge.Chatbot}):(zl(ot(e,t,!0)),pe[s]={sent:!0,type:Ge.Automessage}));const n=e.length>1?e[e.length-2]:void 0;n&&(rc(n,t)?lo(n)?Zl(ot(e,t)):Hl(ot(e,t)):ic(n,t)&&ql(ot(e,t)))},cc=(e,t)=>{var n,o;t.subType===F.MessageSubType.Trigger&&(xl((n=t==null?void 0:t.trigger)==null?void 0:n.name),pe[((o=t.trigger)==null?void 0:o.id)||""]={sent:!0,type:Ge.Trigger});const s=e.length>1?e[e.length-2]:void 0;s&&oc(s,t)&&Vl(ot(e,t))},uc=()=>{const e=b(Fn).filter(s=>s.trigger),t=e[e.length-1];t&&t.trigger&&(t.subType===F.MessageSubType.Bot&&t.content.quickReplies?Kl(t.trigger.name):t.subType===F.MessageSubType.Bot?Wl(t.trigger.name):t.subType===F.MessageSubType.Trigger&&Ul(t.trigger.name))},dc=e=>{e===le.AccountStatus.Offline&&ec()};Y.on("messageReceived",ac);Y.on("agentJoined",e=>{Jl(e.fullname)});Y.on("chatRated",e=>{tc(e.value,e.text)});Y.on("chatClosed",()=>{ao()});Y.on("chatVisitorClosed",()=>{ao()});Et.push(nc);const co=(e,t=300)=>{let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>e(...o),t)}},fc=500;var uo=(e=>(e.Default="blackberry2.mp3",e))(uo||{}),Ne=(e=>(e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(Ne||{}),ln=(e=>(e.Image="image",e.Video="video",e))(ln||{});const gc=e=>{const t=()=>{js()};Fe(()=>(e.addEventListener("visibilitychange",t),()=>e.removeEventListener("visibilitychange",t)))},pc=()=>{const e=re()._smartsupp||{};e.appVersion="0.0.1",e.commitHash="490c3f584e1b011815a0c2fde7d112c4e4fbac4d",e.commitInfo="490c3f584e1b011815a0c2fde7d112c4e4fbac4d - Merge pull request #188 from smartsupp/develop - 2023-04-18 22:23:05 +0200",re()._smartsupp=e},mc=(e=uo.Default)=>{const{widgetV3Url:t}=P.getOptions(),s=new Audio(`${t}/assets/sounds/${e}`);return s.crossOrigin="anonymous",s.load(),s},hc=e=>e.subType!==F.MessageSubType.Contact&&![F.MessageContentType.RateForm,F.MessageContentType.AgentJoin,F.MessageContentType.AgentLeave,F.MessageContentType.AgentAssign,F.MessageContentType.AgentUnassign,F.MessageContentType.ChatTransfer].includes(e.content.type),fo=e=>{ie.isInitialized()&&ie.getClient().notify(e)},bc=()=>fo(hn.EventName.WidgetOpen),_c=()=>fo(hn.EventName.WidgetShow),go=()=>document.visibilityState==="visible",me=I(!1),Ut=I(!0);P.awaitOptions().then(e=>{const t=Se(Z.SoundsEnabled);t?Ut.set(t==="true"):typeof e.enableSounds=="boolean"&&Ut.set(e.enableSounds)});const up=e=>{Ut.set(e),Ie({name:Z.SoundsEnabled,value:e.toString()}),e&&eo()},po=I(go()),yc=co(()=>po.set(go()),fc);re().addEventListener("visibilitychange",()=>{yc()});const vc=I(0),dp=()=>vc.update(e=>e+1),mo=255,wc=32,fp=500,Cc=/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/,gp=/((?:www.)?[^\s.]+\.[^\s/]+\/[^\s.]+)/,pp=e=>{const t={};return e.filter(s=>!s.isHidden).reduce((s,n)=>(s[n.name]=n.value,s),t)},mp=e=>{const t={};return e.reduce((s,n)=>(s[n.name]=n.validators,s),t)},hp=(e,t,s)=>{e.update(n=>({...n,[t]:s}))},bp=(e,t)=>{const s={};for(const n in e)s[n]=t;return s},_p=()=>Math.random().toString(36),Sc=e=>{if(!e)return!1;const t=e.split("@");if(t.length!==2)return!1;const s=t[0],n=t[1];return s.length>64||n.length>255||n.split(".").some(r=>r.length>63)?!1:Cc.test(e)};var qe=(e=>(e.Text="text",e.Checkbox="checkbox",e.Select="select",e))(qe||{});const Jt=()=>e=>{let t=!0;return e==null&&(t=!1),xe(e)&&(t=e.trim().length>0),{type:"required",isValid:t}},Ac=()=>e=>({type:"checked",isValid:xe(e)?e==="true":e===!0}),Tc=()=>e=>({type:"email",isValid:Sc(String(e))}),Ec=()=>e=>({type:"phone",isValid:/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-s./0-9]*$/.test(String(e))}),Mc=e=>{const{emailControl:t}=P.getOptions(),s=!!(e!=null&&e.email);return t&&!s},Oc=e=>{const{nameControl:t}=P.getOptions(),s=!!(e!=null&&e.name);return t&&!s},kc=e=>{const{numberControl:t}=P.getOptions(),s=!!(e!=null&&e.phone);return!!t&&!s},Fc=()=>{const{groupSelectEnabled:e}=P.getOptions(),t=b(Ls);return!!e&&t.length>0},Ic=e=>{var o;const{privacyNoticeEnabled:t,privacyNoticeCheckRequired:s}=P.getOptions(),n=!!((o=e==null?void 0:e.variables)!=null&&o.personalDataProcessingConsent);return!!t&&s&&!n},Lc=e=>{var n;const{privacyNoticeEnabled:t}=P.getOptions(),s=!!((n=e==null?void 0:e.variables)!=null&&n.personalDataProcessingConsent);return!!t&&!s},Rc=()=>({type:qe.Text,subType:"email",name:"email",label:"authForm.label.email",placeholder:"authForm.yourEmail",value:"",validators:[Jt(),Tc()],maxLength:mo}),Bc=()=>({type:qe.Text,subType:"text",name:"name",label:"authForm.label.name",placeholder:"authForm.yourName",value:"",validators:[Jt()],maxLength:mo}),Dc=()=>({type:qe.Text,subType:"tel",name:"phone",label:"authForm.label.phone",placeholder:"authForm.yourPhone",value:"",validators:[Jt(),Ec()],maxLength:wc}),Pc=e=>{const t=b(Ls);return{type:qe.Select,name:"group",label:"authForm.label.group",placeholder:"authForm.group",value:(e==null?void 0:e.group)??"",validators:[Jt()],options:t.map(s=>({text:s.name,value:s.key}))}},$c=()=>({type:qe.Checkbox,name:"personalDataProcessingConsent",label:"authForm.acceptTerms",value:!1,validators:[Ac()]}),Gc=()=>({type:qe.Checkbox,name:"personalDataProcessingConsent",label:"topBar.gdprTitle",value:!1,validators:[],isHidden:!0}),ho=e=>({showEmail:Mc(e),showName:Oc(e),showPhone:kc(e),showGroups:Fc(),showConsent:Ic(e)}),Nc=e=>Object.values(ho(e)).some(t=>t),yp=e=>{const t=[],{showEmail:s,showName:n,showPhone:o,showGroups:r,showConsent:i}=ho(e);return n&&t.push(Bc()),s&&t.push(Rc()),o&&t.push(Dc()),r&&t.push(Pc(e)),i?t.push($c()):t.length>0&&Lc(e)&&t.push(Gc()),t},xc=()=>{const e=jt()[Z.AuthForm];if(!e)return null;try{return JSON.parse(e)}catch{return null}},vp=(e,t)=>{const s=xc(),n={[e]:t},o=s?{...s,...n}:n;Ie({name:Z.AuthForm,value:JSON.stringify(o)})},wp=()=>{As(Z.AuthForm)},Uc=E([we],([e])=>{var t;return((t=e==null?void 0:e.variables)==null?void 0:t.authenticated)===!0}),Vc=()=>{if(b(La)||b(Uc))return!1;const e=b(we);if(!Nc(e))return!1;const{requireLogin:t}=P.getOptions(),s=b(bt)===le.AccountStatus.Offline;return!!t||s},Cp=async e=>{const{privacyNoticeCheckRequired:t}=P.getOptions(),s=b(we),n=(s==null?void 0:s.name)??e.name,o=(s==null?void 0:s.email)??e.email,r=(s==null?void 0:s.phone)??e.phone,i=e.group??(s==null?void 0:s.group),l=e.personalDataProcessingConsent,a={...n&&{name:n},...o&&{email:o},...r&&{phone:r},...i&&{group:i},...l&&t&&{personalDataProcessingConsent:l}};await ie.getClient().authenticate(a),Ql(),await vo(),Is()},Rn=I(!1);re().addEventListener("offline",()=>Rn.set(!0));re().addEventListener("online",()=>Rn.set(!1));const bo=E([On,Rn],([e,t])=>!e||t?Ne.Disconnected:Ne.Connected,Ne.Connecting);let yt;bo.subscribe(e=>{e===Ne.Disconnected&&!yt&&(yt=Nt(b(ce)("error.noInternet"),0)),e===Ne.Connected&&yt&&(yt(),yt=void 0)});const zc=E([bo,no,ht],([e,t,s])=>e===Ne.Disconnected||!t||s.disableAttachments),Vt=I(!1),Sp=e=>{if(b(Vt)){te("There is already file upload in progress");return}if(e.length===0)return;const t=Wc(e);t.length>0&&$e.add(t)},Wc=e=>e.length>vt?(Oe(`${b(ce)("fileUpload.tooManyFiles")} ${vt}`),[]):e.filter(t=>Hc(t)),Hc=e=>{const{acceptedFileExtensions:t,acceptedFileTypes:s,maxFileSize:n}=b(Rs);if(!e)return!1;const o=t.includes(Ba(e.name)),r=s.some(i=>i===e.type);if(b(zc))return te("File upload is disabled"),!1;if(!b(no))return Oe(b(ce)("warningBar.uploadFileNotFirst")),!1;if(e.size>n){const i=Da(n);return Oe(`${b(ce)("fileUpload.fileTooBig")} ${i.size} ${i.unit}`),!1}return o||r?!0:(Oe(b(ce)("fileUpload.badFileType")),!1)},jc=()=>$e.count()===0?[]:($e.setUploadingStatus(),Pa(b($e),e=>$e.setFileUploaded(e.name))),es=10,Kc=1e4,qc=3e4,cn={":)":"🙂",":-)":"🙂",":D":"😀",":-D":"😀",";)":"😉",";-)":"😉","<3":"❤️",":(":"😞",":-(":"😞",":P":"😛",":-P":"😛",":-o":"😮",":O":"😮",":/":"😕",":-/":"😕"},Xc=e=>{const t=`(${e?"$|":""} )`;return new RegExp(Object.keys(cn).map(s=>`${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}${t}`).join("|"),"gi")},_o=(e,t=!1)=>{const s=Xc(t);return e.replace(s,n=>{const o=Object.keys(cn).find(i=>n.toUpperCase().includes(i));if(!o)return n;const r=n.endsWith(" ")?" ":"";return`${cn[o]}${r}`})},Zc=e=>{if(e.length>0&&e.length%es===0){const t=e.slice(-es),s=new Date(e[e.length-1].createdAt).getTime();if(new Date().getTime()-s>qc||!t.every(o=>o.subType===F.MessageSubType.Contact))return!1;const n=new Date(t[0].createdAt).getTime();if(s-n<Kc)return!0}return!1},Bn=I(),zt=I(!1),Ap=I(),Yc=200,Qt=E([Bn],([e])=>typeof e>"u"?Se(Z.Message)??"":e),Dn=E([Qt],([e])=>e.trim().length===0),yo=e=>{Bn.set(_o(e))},Tp=(e,t)=>{const s=b(Qt)??"",n=s.slice(0,t),o=s.slice(t),r=`${n}${e}${o}`;Bn.set(r)},Ep=()=>{if(b(zt))return;ie.getClient().chatTyping(!0),zt.set(!0)},Jc=()=>{if(!b(zt))return;ie.getClient().chatTyping(!1),zt.set(!1)},vo=async(e=[])=>{if(b(Dn)&&e.length===0)return;const t=_o(b(Qt),!0);await X.sendMessage(t,e),yo(""),Jc(),e.length>0&&($e.clear(),Vt.set(!1))},Mp=co(async()=>{const e=$e.count()>0;if(b(Dn)&&!e)return;if(Qc()&&!e){Nt(b(ce)("warningBar.sameMessageTwice"));return}if(Vc()){Fs(Sn.AuthForm);return}if(Zc(b(Ke))){Nt(b(ce)("warningBar.spamProtection"));return}if(b(Vt)){de(b(ce)("chat.fileUpload.error.stillUploading"));return}let t=[];e&&(Vt.set(!0),t=await jc()),await vo(t)},Yc),Qc=()=>{const e=b(fl);return e&&b(Qt)===e.content.text},tt=(e,t)=>(J(`widget visible: ${String(t)} => reason: ${e}`),t&&t!==b(Xe)&&_c(),t),Pn=I(),wo=()=>Pn.set(!0),eu=()=>Pn.set(!1),tu=E([bt,Ke,Dn,zs],([e,t,s,n])=>{const{hideOfflineChat:o,isPreviewMode:r}=P.getOptions();return e===le.AccountStatus.Offline&&!!o&&nl(t).length===0&&s&&!n&&!r}),Xe=E([we,Le,Pn,Re,zs,tu],([e,t,s,n,o,r])=>{const{hideMobileWidget:i,hideWidget:l}=P.getOptions();return e!=null&&e.bannedAt?tt("visitor is banned",!1):t&&i?tt("option 'hideMobileWidget' is true",!1):typeof s=="boolean"?tt("set by API command",s):n&&!o?tt("chat status is not pending",!0):r?tt("option 'hideOfflineChat' is true",!1):tt(`option 'hideWidget' is ${String(l)}`,!l)}),nu=E([Le],([e])=>{const{openOnTrigger:t}=P.getOptions();return t&&!e}),Ce=Sr(Z.IsMessengerFrameOpened,!1,e=>!b(Le)&&e==="true"),en=()=>{Ce.set(!0),uc(),bc()},un=()=>{Ce.set(!1)},su=E([me,Xe,Ce],([e,t,s])=>e&&t&&s);function ou(){const e=I(!1),{subscribe:t}=e;let s=null;return{subscribe:t,handleDragOver:(r,i=!0)=>{i&&r.preventDefault(),b(e)||e.set(!0),s&&clearTimeout(s),s=window.setTimeout(()=>{e.set(!1)},200)},handleDrop:r=>{var l;r.preventDefault(),s&&clearTimeout(s),e.set(!1);const i=(l=r.dataTransfer)!=null&&l.files?[...r.dataTransfer.files]:[];return i.length===0&&Nt("Dropped item(s) are not processable files"),{droppedFiles:i}}}}const Op=ou(),ru=E([me,Xe,Ce],([e,t,s])=>e&&t&&!s),$n=I(!1),Gn=I(!1),iu=()=>{$n.set(!0),Gn.set(!1)},Co=()=>{Gn.set(!0),$n.set(!1)},So=E([Le],([e])=>{const{mobilePopupsEnabled:t}=P.getOptions();return e?!!t:!0}),au=E([me,Xe,$n,Ce,So],([e,t,s,n,o])=>e&&t&&s&&!n&&o),lu=E([me,Xe,Gn,Ce,In,So],([e,t,s,n,o,r])=>e&&t&&s&&o&&!n&&r),dn={white:"#ffffff",slate100:"#f1f5f9",slate200:"#e2e8f0",slate900:"#0f172a",blue700:"#1d4ed8",smartsuppBlue:"#1233df"},cu=.299,uu=.587,du=.114,fu=180,gu=-20,pu=-.25,mu=.2,hu=-5,bu=.03,_u=.5,ts=5,Dt=(e,t)=>new gt(e).darken(t).toHexString(),yu=e=>{const t=new gt(e).toRgb();return`${t.r}, ${t.g}, ${t.b}`},Ao=e=>/^#[0-9A-F]{6}$/i.test(e),tn=e=>{const{r:t,g:s,b:n}=new gt(e).toRgb();return Math.sqrt(cu*(t*t)+uu*(s*s)+du*(n*n))>fu},vu=e=>{const t=new gt(e),{s,l:n}=t.toHsl();return t.spin(gu).desaturate(s*pu).lighten(n*mu).toHexString()},wu=(e,t=_u)=>{const s=new gt(e),{s:n,l:o}=s.toHsl();return s.spin(hu).saturate(n*bu).darken(o*t).toHexString()},Cu=e=>tn(e)?{from:e,to:wu(e)}:{from:e,to:vu(e)},Su=e=>tn(e)?dn.slate900:dn.white,Au=e=>tn(e)?.1:.2,Tu=e=>{if(tn(e)){const t=new gt(e).getLuminance();return t>.8?Dt(e,Math.pow(10*t,t)):e}return e},he=(e,t,s)=>{e.documentElement.style.setProperty(t,s)},Eu=(e,t)=>{const s=Cu(t),n=Su(t);he(e,"--color-primary",t),he(e,"--color-primary-content",n),he(e,"--color-primary-content-rgb",yu(n)),he(e,"--color-primary-gradient-from",s.from),he(e,"--color-primary-gradient-to",s.to),he(e,"--color-primary-gradient-hover-from",Dt(s.from,ts)),he(e,"--color-primary-gradient-hover-to",Dt(s.to,ts));const o=Tu(t);he(e,"--color-primary-button",o),he(e,"--color-primary-button-hover",Dt(o,10)),he(e,"--color-primary-button-content",n),he(e,"--opacity-primary-content",String(Au(t)))},Mu=()=>{const e=I(dn.smartsuppBlue),{subscribe:t,set:s}=e;return{subscribe:t,setThemeColor:o=>{if(!Ao(o)){te(`Provided color '${o}' is not valid. Default color will be used instead.`);return}s(o)}}},Nn=Mu();var H=(e=>(e.Name="name",e.Group="group",e.Email="email",e.Phone="phone",e.Variables="variables",e.Language="language",e.ChatClose="chat:close",e.ChatOpen="chat:open",e.ChatShow="chat:show",e.ChatHide="chat:hide",e.ThemeColor="theme:color",e.ChatMessage="chat:message",e.RecordingDisable="recording:disable",e.RecordingOff="recording:off",e.HtmlApply="html:apply",e.On="on",e.AnalyticsConsent="analyticsConsent",e.MarketingConsent="marketingConsent",e))(H||{}),Wt=(e=>(e.MessageSent="message_sent",e.MessageReceived="message_received",e))(Wt||{});const Ou=e=>{Y.on("messageSent",e)},ku=e=>{Y.on("messageReceived",e)},Fu={[Wt.MessageSent]:Ou,[Wt.MessageReceived]:ku},Iu=(e,t)=>{const s=Fu[e];s&&s(t)},Ze="https://docs.smartsupp.com/chat-box/",Lu=`${Ze}localization/#supported-languages`,Ru=`${Ze}visitor-identification/#custom-visitor-data`,Bu=`${Ze}javascript-api/events/`,Du="https://www.smartsupp.com/help/cookie-consent/#where-to-enable-cookie-consent-in-smartsupp",Pu="https://www.smartsupp.com/pricing",xn=I({}),fn=(e,t)=>{xn.update(s=>({...s,[e]:t}))},$u=e=>Object.values(H).some(t=>t===e),_t=(e,t)=>xe(t)?!0:(te(`Parameter of '${e}' API command must be type string. See ${Ze} for more information.`),!1),To=(e,t)=>Gs(t)?!0:(te(`Parameter of '${e}' API command must be type boolean. See ${Ze} for more information.`),!1),Gu=(e,t)=>typeof t!="function"?(te(`Parameter of '${e}' API command must be type function. See ${Ze} for more information.`),!1):!0,Nu=(e,t)=>Ns(t)?!0:(te(`Parameter of '${e}' API command must be type object. See ${Ru} for more information.`),!1),xu=(e,t)=>{const s=Object.values(Wt);return s.includes(t)?!0:(te(`Unknown event: '${t}'. Available event names are: ${s.join(", ")}. See ${Bu} for more information.`),!1)},Eo=e=>{te(`Unknown API command: '${e}'. See ${Ze} to check available API commands.`)},Uu=()=>{var e;return!!((e=P.getOptions().features)!=null&&e.api)},Vu=()=>Uu()?!0:(te(`Chat box API feature is not enabled. See ${Pu} to upgrade your package.`),!1),Mo=()=>{yn()||te(`Enable managing cookie consent in widget settings to allow this command. See ${Du} for more information.`)},zu=()=>{const e=()=>{en(),wo()};if(!b(me)){Et.push(e);return}e()},Wu=()=>{if(!b(me)){Et.push(un);return}un()},Hu=()=>{wo()},ju=()=>{eu()},Ku=(e,t)=>{if(e===H.Language&&_t(e,t)){if(!Ps(t)){te(`Provided language '${t}' is not supported. See ${Lu} to check supported languages.`);return}if(!b(me)){fn(e,t);return}Wi(t)}},qu=(e,t)=>{if(Vu()&&_t(e,t)){if(!Ao(t)){te(`Provided color '${t}' is not valid. Please use hex color code.`);return}Nn.setThemeColor(t)}},Xu=(e,t)=>{_t(e,t)&&yo(t)},Zu=(e,t,s)=>{_t(e,t)&&xu(e,t)&&Gu(e,s)&&Iu(t,s)},Yu=(e,t)=>{Nu(e,t)&&we.updateVisitorVariables(Ca(t))},Pt=(e,t)=>{e!==H.Name&&e!==H.Email&&e!==H.Phone&&e!==H.Group||_t(e,t)&&we.updateVisitorProperty(e,t)},Ju=(e,t)=>{if(!_t(e,t))return;const s=b(Tn)[t];if(b(me)&&!s){te(`Group with key '${t}' does not exist. Please provide correct group key from your group settings.`);return}Pt(e,t)},Qu=(e,t)=>{To(e,t)&&(Mo(),Y.emit("analyticsConsentChanged",!!t))},ed=(e,t)=>{To(e,t)&&(Mo(),Y.emit("marketingConsentChanged",!!t))},td={version:"490c3f584e1b011815a0c2fde7d112c4e4fbac4d",execute:e=>{const t=e[0];if(typeof t=="function"){od(t);return}if(!$u(t)){Eo(String(t));return}sd(t,e[1],...e.slice(2))},exec:function(...e){this.execute(e)}},nd={[H.ChatOpen]:zu,[H.ChatClose]:Wu,[H.ChatShow]:Hu,[H.ChatHide]:ju,[H.ChatMessage]:Xu,[H.Language]:Ku,[H.ThemeColor]:qu,[H.On]:Zu,[H.Variables]:Yu,[H.Name]:Pt,[H.Group]:Ju,[H.Email]:Pt,[H.Phone]:Pt,[H.AnalyticsConsent]:Qu,[H.MarketingConsent]:ed,[H.HtmlApply]:null,[H.RecordingDisable]:null,[H.RecordingOff]:null},sd=(e,t,...s)=>{const n=nd[e];if(n===void 0){Eo(e);return}n!==null&&(n(e,t,...s),J(`🧙‍♂️[API] ${e}${t?":":""}`,t??""))},od=e=>{b(me)?e():Et.push(e)},Ee=re(),rt=(e,t)=>{J(`recordings ${e?"✅":"⛔️"}${t?` => reason: ${t}`:""}`)},Oo=()=>{const{smartlook:e,recordingOff:t}=P.getOptions();if(!e||!e.enabled)return rt(!1,"recordings are not enabled");if(Ee.smartlook)return rt(!1,"smartlook is already in parent window");if(!Kt())return rt(!1,"analytics consent not given");if(t)return rt(!1,"recording is disabled by 'recordingOff' option");id()},rd=(e,t)=>{const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("script");n.async=!0,n.type="text/javascript",n.charset="utf-8",n.crossOrigin="anonymous",n.src=t,s.appendChild(n)},id=()=>{const{smartlook:e,recordingDisable:t}=P.getOptions(),s=Ee.smartlook=function(...n){var o,r;(r=(o=Ee.smartlook)==null?void 0:o.api)==null||r.push(n)};Ee.smartlook.api=[],rd(Ee,e.scriptUrl),s("init",e.key,{host:e.serverHost}),s("record",{forms:!0,numbers:!0,emails:!0,ips:!1}),t?(s("pause"),rt(!1,"recording is disabled by 'recordingDisable' option")):(s(()=>{var o;const n=(o=Ee.smartlook)==null?void 0:o.visitorId;if(!n){de("Smartlook visitorId is undefined");return}we.updateVisitorVariables({smartlook_vid:n}),rt(!0)}),J("recordings: initializing ⏳"))};Y.on("analyticsConsentChanged",e=>{if(Ee.smartlook){Ee.smartlook(e?"resume":"pause"),J(`recordings ${e?"resumed ▶️":"paused ⏸"}`);return}Oo()});function ad(e){let t,s,n;const o=e[2].default,r=wt(o,e,e[1],null);return{c(){t=C("div"),s=C("div"),r&&r.c(),f(s,"id","smartsupp-widget-container")},m(i,l){A(i,t,l),v(t,s),r&&r.m(s,null),e[3](s),n=!0},p(i,[l]){r&&r.p&&(!n||l&2)&&Ct(r,o,i,i[1],n?At(o,i[1],l,null):St(i[1]),null)},i(i){n||(p(r,i),n=!0)},o(i){m(r,i),n=!1},d(i){i&&T(t),r&&r.d(i),e[3](null)}}}function ld(e,t,s){let{$$slots:n={},$$scope:o}=t,r;function i(){return Pe().body}Fe(()=>{i().appendChild(r)}),bn(()=>{var a;(a=Pe().getElementById("smartsupp-widget-container"))==null||a.remove()});function l(a){Ue[a?"unshift":"push"](()=>{r=a,s(0,r)})}return e.$$set=a=>{"$$scope"in a&&s(1,o=a.$$scope)},[r,o,n,l]}class cd extends G{constructor(t){super(),N(this,t,ld,ad,x,{})}}function ud(e){let t;return{c(){t=C("iframe"),f(t,"id",e[2]),f(t,"title",e[1]),f(t,"style",e[0]),t.allowFullscreen=!0,f(t,"scrolling","no")},m(s,n){A(s,t,n),e[7](t)},p(s,[n]){n&4&&f(t,"id",s[2]),n&2&&f(t,"title",s[1]),n&1&&f(t,"style",s[0])},i:W,o:W,d(s){s&&T(t),e[7](null)}}}function dd(e,t,s){let n;q(e,Nn,_=>s(6,n=_));let{component:o}=t,{frameStyle:r}=t,{title:i}=t,{id:l}=t,a,c,d;const u=_=>{d&&d.$destroy(),_&&o&&(d=new o({target:_.body}))},g=_=>{c&&Eu(c,_)},y=_=>{const B=c.createElement("style");return B.textContent=_,c.head.appendChild(B),B},S=()=>{for(const _ of window.document.styleSheets){const B=[..._.cssRules].map($=>$.cssText).join("");y(B)}},h=()=>{a.contentDocument&&(s(5,c=a.contentDocument),S())};Fe(async()=>{var _;await vs(),((_=a.contentDocument)==null?void 0:_.readyState)==="complete"&&a.contentDocument.defaultView?h():a.addEventListener("load",h)}),bn(()=>{a&&a.removeEventListener("load",h),d&&d.$destroy()});function w(_){Ue[_?"unshift":"push"](()=>{a=_,s(3,a)})}return e.$$set=_=>{"component"in _&&s(4,o=_.component),"frameStyle"in _&&s(0,r=_.frameStyle),"title"in _&&s(1,i=_.title),"id"in _&&s(2,l=_.id)},e.$$.update=()=>{e.$$.dirty&32&&u(c),e.$$.dirty&96&&c&&g(n)},[r,i,l,a,o,c,n,w]}class kt extends G{constructor(t){super(),N(this,t,dd,ud,x,{component:4,frameStyle:0,title:1,id:2})}}const ko=24,Fo=12,fd=300,Io=56,Lo=Io,gd=166,pd=Lo+16,md=380,hd=672,bd=12,_d=560,yd=840,vd=104,wd=60,kp=E([Le],([e])=>e?wd:vd),ft=e=>`${e}px`,Ro=e=>{if(e)return xe(e)?parseInt(e,10):e},Cd=(e,t)=>e?{width:"100%",height:"100%"}:t?{width:_d,height:yd}:{width:md,height:hd},Sd=e=>{e.style.borderRadius=ft(bd),e.style.boxShadow="rgba(0, 0, 0, 0.16) 0px 5px 40px"},Bo=()=>{const{offsetY:e}=P.getOptions();return Ro(e)??ko},Do=()=>{const{offsetX:e}=P.getOptions();return Ro(e)??Fo},Ad=e=>e?0:ko,Td=e=>e?0:Fo,Un=()=>{const{position:e}=P.getOptions();return e==="fixed"},Vn=e=>{Un()&&(e.style.position="fixed")},nn=(e,t)=>{Un()&&(e.style.bottom=ft(t))},sn=(e,t)=>{if(Un()){const{orientation:s}=P.getOptions();s==="right"?(e.style.left="initial",e.style.right=ft(t)):(e.style.left=ft(t),e.style.right="initial")}},on=e=>{const{zIndex:t}=P.getOptions();e.style.zIndex=String(t??"auto")},Po=e=>{e.style.overflow="hidden"},Ft=e=>{const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.display="block",t.style.textAlign="left",t.style.margin="0",t.style.padding="0",t.style.top="0",t.style.left="0",t.style.opacity="1",e&&e(t),t.getAttribute("style")??""},Ed=e=>{Vn(e),nn(e,Bo()),sn(e,Do()),on(e)},Md=(e,t)=>{Vn(e),nn(e,Ad(t)),sn(e,Td(t)),on(e),Po(e),t||Sd(e)},$o=e=>{Vn(e),nn(e,Bo()+pd),sn(e,Do()),on(e),Po(e)},Od=e=>{e.style.position="fixed",e.style.width="100%",e.style.height="100%",nn(e,0),sn(e,0),on(e)},kd=e=>{Ed(e)},Fd=(e,t)=>{Md(e,t)},Id=e=>{$o(e)},Ld=e=>{$o(e)},Rd=e=>{Od(e)},Go=I(fd),No=I(gd),gn=I(!1),xo=E([Le],([e])=>{const{buttonStyle:t}=P.getOptions();return e||t==="bubble"}),Bd=E([xo,Go],([e,t])=>e?Io:t),Uo=I(),Dd=E([Uo],([e])=>typeof e>"u"?Se(Z.IsMessengerFrameExpanded)===(!0).toString():e),Fp=e=>{Ie({name:Z.IsMessengerFrameExpanded,value:e.toString()}),Uo.set(e)};function Pd(e){let t,s;return{c(){t=Me("svg"),s=Me("path"),f(s,"d","M63.113,18.51v-.16C60.323,7.05,44.582,3,31.972,3S3.582,7,.792,18.5a66.22,66.22,0,0,0,0,20.46c1.18,4.74,5.05,8.63,11.36,11.41l-4,5A3.47,3.47,0,0,0,10.882,61a3.39,3.39,0,0,0,1.44-.31L26.862,54c1.79.18,3.49.27,5.07.27,11.04.04,28.41-4.04,31.18-15.43a60.33,60.33,0,0,0,0-20.33Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 64 64"),f(t,"fill","currentColor"),f(t,"preserveAspectRatio","xMidYMid meet"),f(t,"width",e[0]),f(t,"height",e[0])},m(n,o){A(n,t,o),v(t,s)},p(n,[o]){o&1&&f(t,"width",n[0]),o&1&&f(t,"height",n[0])},i:W,o:W,d(n){n&&T(t)}}}function $d(e,t,s){let{size:n=16}=t;return e.$$set=o=>{"size"in o&&s(0,n=o.size)},[n]}class Gd extends G{constructor(t){super(),N(this,t,$d,Pd,x,{size:0})}}function ns(e){let t;const s=e[2].default,n=wt(s,e,e[1],null);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),t=!0},p(o,r){n&&n.p&&(!t||r&2)&&Ct(n,s,o,o[1],t?At(s,o[1],r,null):St(o[1]),null)},i(o){t||(p(n,o),t=!0)},o(o){m(n,o),t=!1},d(o){n&&n.d(o)}}}function Nd(e){let t,s,n=e[0]&&ns(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&p(n,1)):(n=ns(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function xd(e,t,s){let{$$slots:n={},$$scope:o}=t,r=!1;return Fe(()=>{s(0,r=!0)}),e.$$set=i=>{"$$scope"in i&&s(1,o=i.$$scope)},[r,o,n]}class Ud extends G{constructor(t){super(),N(this,t,xd,Nd,x,{})}}function Vd(e){let t,s,n,o;return s=new Gd({props:{size:24}}),{c(){t=C("div"),M(s.$$.fragment),f(t,"class","transform transition-transform duration-300 group-hover:scale-115")},m(r,i){A(r,t,i),O(s,t,null),o=!0},p:W,i(r){o||(p(s.$$.fragment,r),ve(()=>{o&&(n||(n=it(t,at,{delay:200,duration:300,start:.6,opacity:.8},!0)),n.run(1))}),o=!0)},o(r){m(s.$$.fragment,r),n||(n=it(t,at,{delay:200,duration:300,start:.6,opacity:.8},!1)),n.run(0),o=!1},d(r){r&&T(t),k(s),r&&n&&n.end()}}}function zd(e){let t,s;return t=new Ud({props:{$$slots:{default:[Vd]},$$scope:{ctx:e}}}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p(n,[o]){const r={};o&1&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}class Vo extends G{constructor(t){super(),N(this,t,null,zd,x,{})}}function Wd(e){let t,s,n,o;return n=new Vo({}),{c(){t=C("div"),s=C("div"),M(n.$$.fragment),f(s,"class","flex-center w-12 h-12 bg-white bg-opacity-10 rounded-full"),f(t,"class","p-1")},m(r,i){A(r,t,i),v(t,s),O(n,s,null),o=!0},p:W,i(r){o||(p(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&T(t),k(n)}}}class Hd extends G{constructor(t){super(),N(this,t,null,Wd,x,{})}}function jd(e){let t,s,n=e[1]("button.greeting")+"",o,r,i,l;return i=new Hd({}),{c(){t=C("div"),s=C("div"),o=Ve(n),r=z(),M(i.$$.fragment),f(s,"class","flex-center whitespace-nowrap pl-4 pr-1"),f(s,"data-testid",se.widgetButtonText),f(t,"class","flex")},m(a,c){A(a,t,c),v(t,s),v(s,o),v(t,r),O(i,t,null),e[2](t),l=!0},p(a,[c]){(!l||c&2)&&n!==(n=a[1]("button.greeting")+"")&&ze(o,n)},i(a){l||(p(i.$$.fragment,a),l=!0)},o(a){m(i.$$.fragment,a),l=!1},d(a){a&&T(t),k(i),e[2](null)}}}function Kd(e,t,s){let n;q(e,ce,i=>s(1,n=i));let o;Fe(()=>{const i=Math.ceil(o.getBoundingClientRect().width);Go.set(i)});function r(i){Ue[i?"unshift":"push"](()=>{o=i,s(0,o)})}return[o,n,r]}class qd extends G{constructor(t){super(),N(this,t,Kd,jd,x,{})}}function ss(e){let t,s,n;return{c(){t=C("div"),f(t,"id","widget-online-badge"),f(t,"class","absolute left-0 bottom-0 w-2 h-2 p-1.5 bg-green-400 rounded-full border-2 border-white"),f(t,"data-testid",se.widgetOnlineBadge)},m(o,r){A(o,t,r),n=!0},p:W,i(o){n||(ve(()=>{n&&(s||(s=it(t,at,{},!0)),s.run(1))}),n=!0)},o(o){s||(s=it(t,at,{},!1)),s.run(0),n=!1},d(o){o&&T(t),o&&s&&s.end()}}}function Xd(e){let t,s,n=e[0]&&ss();return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&p(n,1)):(n=ss(),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function Zd(e,t,s){let n;return q(e,Ws,o=>s(0,n=o)),[n]}class Yd extends G{constructor(t){super(),N(this,t,Zd,Xd,x,{})}}function os(e){let t,s=(e[0]>99?"99+":e[0])+"",n,o,r;return{c(){t=C("div"),n=Ve(s),f(t,"id","widget-unread-messages-badge"),f(t,"class","absolute right-0 top-0 min-w-5 h-5 flex-center px-1 text-white bg-red-500 text-xs rounded-full shadow"),f(t,"data-testid",se.widgetUnreadMessagesBadge)},m(i,l){A(i,t,l),v(t,n),r=!0},p(i,l){(!r||l&1)&&s!==(s=(i[0]>99?"99+":i[0])+"")&&ze(n,s)},i(i){r||(ve(()=>{r&&(o||(o=it(t,at,{},!0)),o.run(1))}),r=!0)},o(i){o||(o=it(t,at,{},!1)),o.run(0),r=!1},d(i){i&&T(t),i&&o&&o.end()}}}function Jd(e){let t,s,n=e[1]&&os(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[1]?n?(n.p(o,r),r&2&&p(n,1)):(n=os(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function Qd(e,t,s){let n;q(e,to,r=>s(0,n=r));let o;return e.$$.update=()=>{e.$$.dirty&1&&s(1,o=n>0)},[n,o]}class ef extends G{constructor(t){super(),N(this,t,Qd,Jd,x,{})}}function tf(e){let t,s;return t=new qd({}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function nf(e){let t,s;return t=new Vo({}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function sf(e){let t,s,n,o,r,i,l,a,c,d,u;const g=[nf,tf],y=[];function S(h,w){return h[0]?0:1}return n=S(e),o=y[n]=g[n](e),i=new Yd({}),a=new ef({}),{c(){t=C("div"),s=C("div"),o.c(),r=z(),M(i.$$.fragment),l=z(),M(a.$$.fragment),f(s,"role","button"),f(s,"tabindex",0),f(s,"class","group flex-center w-full bg-primary-gradient bg-primary-gradient-hover text-primary-content rounded-full overflow-hidden cursor-pointer"),f(s,"data-testid",se.widgetButton),f(t,"id","smartsupp-widget-button"),f(t,"class","h-full w-full relative flex justify-end")},m(h,w){A(h,t,w),v(t,s),y[n].m(s,null),v(s,r),O(i,s,null),v(t,l),O(a,t,null),c=!0,d||(u=ge(s,"click",en),d=!0)},p(h,[w]){let _=n;n=S(h),n!==_&&(Q(),m(y[_],1,1,()=>{y[_]=null}),ee(),o=y[n],o||(o=y[n]=g[n](h),o.c()),p(o,1),o.m(s,r))},i(h){c||(p(o),p(i.$$.fragment,h),p(a.$$.fragment,h),c=!0)},o(h){m(o),m(i.$$.fragment,h),m(a.$$.fragment,h),c=!1},d(h){h&&T(t),y[n].d(),k(i),k(a),d=!1,u()}}}function of(e,t,s){let n;return q(e,xo,o=>s(0,n=o)),[n]}class rf extends G{constructor(t){super(),N(this,t,of,sf,x,{})}}function rs(e){let t,s,n,o,r,i,l;return s=new kt({props:{component:rf,id:se.widgetButtonFrame,title:"Smartsupp widget button",frameStyle:Ft()}}),{c(){t=C("div"),M(s.$$.fragment),U(t,"border-radius","9999px"),U(t,"box-shadow","rgb(0 0 0 / 6%) 0px 1px 6px 0px, rgb(0 0 0 / 12%) 0px 2px 32px 0px"),f(t,"data-testid",se.widgetButtonFrame),U(t,"height",Lo)},m(a,c){A(a,t,c),O(s,t,null),e[3](t),r=!0,i||(l=Tt(kd.call(null,t)),i=!0)},p:W,i(a){r||(p(s.$$.fragment,a),ve(()=>{r&&(o&&o.end(1),n=We(t,ue,{y:20,delay:150,duration:300}),n.start())}),r=!0)},o(a){m(s.$$.fragment,a),n&&n.invalidate(),o=He(t,Zo,{duration:250}),r=!1},d(a){a&&T(t),k(s),e[3](null),a&&o&&o.end(),i=!1,l()}}}function af(e){let t,s,n=e[1]&&rs(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[1]?n?(n.p(o,r),r&2&&p(n,1)):(n=rs(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function lf(e,t,s){let n,o;q(e,Bd,a=>s(2,n=a)),q(e,ru,a=>s(1,o=a));let r;const i=a=>{s(0,r.style.width=`${a}px`,r)};function l(a){Ue[a?"unshift":"push"](()=>{r=a,s(0,r)})}return e.$$.update=()=>{e.$$.dirty&5&&r&&i(n)},[r,o,n,l]}class cf extends G{constructor(t){super(),N(this,t,lf,af,x,{})}}function uf(e){let t;return{c(){t=C("div"),f(t,"class",e[3]),R(t,"bg-gray-200",e[2]==="gray"),R(t,"bg-gray-300",e[2]==="darkGray"),U(t,"height",e[0]),U(t,"width",e[1])},m(s,n){A(s,t,n)},p(s,[n]){n&4&&R(t,"bg-gray-200",s[2]==="gray"),n&4&&R(t,"bg-gray-300",s[2]==="darkGray"),n&1&&U(t,"height",s[0]),n&2&&U(t,"width",s[1])},i:W,o:W,d(s){s&&T(t)}}}function df(e,t,s){let{height:n=20}=t,{width:o="100%"}=t,{colorScheme:r="gray"}=t,{roundedStyle:i="rounded-full"}=t;const l=`${i} animate-pulse`;return e.$$set=a=>{"height"in a&&s(0,n=a.height),"width"in a&&s(1,o=a.width),"colorScheme"in a&&s(2,r=a.colorScheme),"roundedStyle"in a&&s(4,i=a.roundedStyle)},[n,o,r,l,i]}class Be extends G{constructor(t){super(),N(this,t,df,uf,x,{height:0,width:1,colorScheme:2,roundedStyle:4})}}function ff(e){let t,s;return t=new Be({props:{colorScheme:"darkGray",width:e[0],height:e[0]}}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p(n,[o]){const r={};o&1&&(r.width=n[0]),o&1&&(r.height=n[0]),t.$set(r)},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function gf(e,t,s){let{size:n=20}=t;return e.$$set=o=>{"size"in o&&s(0,n=o.size)},[n]}class nt extends G{constructor(t){super(),N(this,t,gf,ff,x,{size:0})}}const pf=e=>({}),is=e=>({}),mf=e=>({error:e&8}),as=e=>({error:e[3]});function hf(e){let t,s,n;var o=e[2];function r(i){return{}}return o&&(t=lt(o,r())),{c(){t&&M(t.$$.fragment),s=_e()},m(i,l){t&&O(t,i,l),A(i,s,l),n=!0},p(i,l){if(l&4&&o!==(o=i[2])){if(t){Q();const a=t;m(a.$$.fragment,1,0,()=>{k(a,1)}),ee()}o?(t=lt(o,r()),M(t.$$.fragment),p(t.$$.fragment,1),O(t,s.parentNode,s)):t=null}},i(i){n||(t&&p(t.$$.fragment,i),n=!0)},o(i){t&&m(t.$$.fragment,i),n=!1},d(i){i&&T(s),t&&k(t,i)}}}function bf(e){let t;const s=e[7].loading,n=wt(s,e,e[6],is);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),t=!0},p(o,r){n&&n.p&&(!t||r&64)&&Ct(n,s,o,o[6],t?At(s,o[6],r,pf):St(o[6]),is)},i(o){t||(p(n,o),t=!0)},o(o){m(n,o),t=!1},d(o){n&&n.d(o)}}}function _f(e){let t;const s=e[7].error,n=wt(s,e,e[6],as);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),t=!0},p(o,r){n&&n.p&&(!t||r&72)&&Ct(n,s,o,o[6],t?At(s,o[6],r,mf):St(o[6]),as)},i(o){t||(p(n,o),t=!0)},o(o){m(n,o),t=!1},d(o){n&&n.d(o)}}}function yf(e){let t,s,n,o;const r=[_f,bf,hf],i=[];function l(a,c){return a[1]===a[0].Error?0:a[1]===a[0].Loading?1:a[1]===a[0].Success?2:-1}return~(t=l(e))&&(s=i[t]=r[t](e)),{c(){s&&s.c(),n=_e()},m(a,c){~t&&i[t].m(a,c),A(a,n,c),o=!0},p(a,[c]){let d=t;t=l(a),t===d?~t&&i[t].p(a,c):(s&&(Q(),m(i[d],1,1,()=>{i[d]=null}),ee()),~t?(s=i[t],s?s.p(a,c):(s=i[t]=r[t](a),s.c()),p(s,1),s.m(n.parentNode,n)):s=null)},i(a){o||(p(s),o=!0)},o(a){m(s),o=!1},d(a){~t&&i[t].d(a),a&&T(n)}}}const pn=new Map,vf=async e=>{const t=(await e()).default;return pn.set(e,t),t};function wf(e,t,s){let{$$slots:n={},$$scope:o}=t;const r=Yo(n);var i;(function(h){h[h.Initialized=0]="Initialized",h[h.Loading=1]="Loading",h[h.Success=2]="Success",h[h.Error=3]="Error"})(i||(i={}));let{delay:l=200}=t,{loader:a}=t,c=i.Initialized,d=null,u=null,g;const y=()=>{window.clearTimeout(g)},S=async()=>{y(),s(3,u=null),s(2,d=null),l>0?(s(1,c=i.Initialized),g=window.setTimeout(()=>{s(1,c=i.Loading)},l)):s(1,c=i.Loading);try{s(2,d=await vf(a)),s(1,c=i.Success)}catch(h){if(s(1,c=i.Error),h instanceof Error&&s(3,u=h),!r.error)throw h}y()};return pn.has(a)?(c=i.Success,d=pn.get(a)):Fe(()=>{S()}),e.$$set=h=>{"delay"in h&&s(4,l=h.delay),"loader"in h&&s(5,a=h.loader),"$$scope"in h&&s(6,o=h.$$scope)},[i,c,d,u,l,a,o,n]}class Cf extends G{constructor(t){super(),N(this,t,wf,yf,x,{delay:4,loader:5})}}const Sf="modulepreload",Af=function(e,t){return e.startsWith(".")?new URL(e,t).href:e},ls={},Tf=function(t,s,n){if(!s||s.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(s.map(r=>{if(r=Af(r,n),r in ls)return;ls[r]=!0;const i=r.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!n)for(let d=o.length-1;d>=0;d--){const u=o[d];if(u.href===r&&(!i||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":Sf,i||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),i)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Ef=()=>Tf(()=>import("./WidgetMessenger-a5ac6c81.js"),[window.widget.getAssetUrl("assets/WidgetMessenger-a5ac6c81.js"),window.widget.getAssetUrl("assets/vendor-201a5563.js")],import.meta.url);function Mf(e){let t,s,n,o,r,i,l,a,c,d,u,g,y,S,h,w,_,B,$,D,L,K,ae,fe,zn,It,Ye,Wn,Ae,Je,Hn,Qe,jn,et,Lt;return o=new nt({props:{size:32}}),l=new nt({props:{size:32}}),c=new nt({props:{size:32}}),u=new nt({props:{size:32}}),h=new nt({props:{size:44}}),B=new Be({props:{height:20,width:270}}),D=new Be({props:{height:20,width:122}}),fe=new nt({props:{size:28}}),Ye=new Be({props:{height:112,width:295,roundedStyle:"rounded-6"}}),Je=new Be({props:{height:32,width:295}}),Qe=new Be({props:{height:32,width:148}}),et=new Be({props:{height:32,width:224}}),{c(){t=C("div"),s=C("div"),n=C("div"),M(o.$$.fragment),r=z(),i=C("div"),M(l.$$.fragment),a=z(),M(c.$$.fragment),d=z(),M(u.$$.fragment),g=z(),y=C("div"),S=C("div"),M(h.$$.fragment),w=z(),_=C("div"),M(B.$$.fragment),$=z(),M(D.$$.fragment),L=z(),K=C("div"),ae=C("div"),M(fe.$$.fragment),zn=z(),It=C("div"),M(Ye.$$.fragment),Wn=z(),Ae=C("div"),M(Je.$$.fragment),Hn=z(),M(Qe.$$.fragment),jn=z(),M(et.$$.fragment),f(n,"class","flex"),f(i,"class","flex space-x-2"),f(s,"class","flex justify-between"),f(S,"class","flex ml-1 mr-2"),f(_,"class","flex-bottom space-y-2"),f(y,"class","flex mt-2"),f(ae,"class","flex ml-1 mr-2"),f(It,"class","space-y-2"),f(K,"class","flex items-baseline mt-8"),f(Ae,"class","flex flex-col items-end space-y-5 mt-8 mr-1"),f(t,"slot","loading"),f(t,"class","h-full p-2 bg-white")},m(V,jo){A(V,t,jo),v(t,s),v(s,n),O(o,n,null),v(s,r),v(s,i),O(l,i,null),v(i,a),O(c,i,null),v(i,d),O(u,i,null),v(t,g),v(t,y),v(y,S),O(h,S,null),v(y,w),v(y,_),O(B,_,null),v(_,$),O(D,_,null),v(t,L),v(t,K),v(K,ae),O(fe,ae,null),v(K,zn),v(K,It),O(Ye,It,null),v(t,Wn),v(t,Ae),O(Je,Ae,null),v(Ae,Hn),O(Qe,Ae,null),v(Ae,jn),O(et,Ae,null),Lt=!0},p:W,i(V){Lt||(p(o.$$.fragment,V),p(l.$$.fragment,V),p(c.$$.fragment,V),p(u.$$.fragment,V),p(h.$$.fragment,V),p(B.$$.fragment,V),p(D.$$.fragment,V),p(fe.$$.fragment,V),p(Ye.$$.fragment,V),p(Je.$$.fragment,V),p(Qe.$$.fragment,V),p(et.$$.fragment,V),Lt=!0)},o(V){m(o.$$.fragment,V),m(l.$$.fragment,V),m(c.$$.fragment,V),m(u.$$.fragment,V),m(h.$$.fragment,V),m(B.$$.fragment,V),m(D.$$.fragment,V),m(fe.$$.fragment,V),m(Ye.$$.fragment,V),m(Je.$$.fragment,V),m(Qe.$$.fragment,V),m(et.$$.fragment,V),Lt=!1},d(V){V&&T(t),k(o),k(l),k(c),k(u),k(h),k(B),k(D),k(fe),k(Ye),k(Je),k(Qe),k(et)}}}function Of(e){let t,s,n,o,r=e[0]+"",i;return{c(){t=C("div"),s=C("div"),s.textContent="Failed to load widget",n=z(),o=C("div"),i=Ve(r),f(s,"class","text-lg font-bold"),f(o,"class","text-xs"),f(t,"slot","error"),f(t,"class","h-full p-4 bg-white text-red-500")},m(l,a){A(l,t,a),v(t,s),v(t,n),v(t,o),v(o,i)},p(l,a){a&1&&r!==(r=l[0]+"")&&ze(i,r)},d(l){l&&T(t)}}}function kf(e){let t,s;return t=new Cf({props:{loader:Ef,delay:0,$$slots:{error:[Of,({error:n})=>({0:n}),({error:n})=>n?1:0],loading:[Mf]},$$scope:{ctx:e}}}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p(n,[o]){const r={};o&3&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}class Ff extends G{constructor(t){super(),N(this,t,null,kf,x,{})}}function cs(e){let t,s,n,o,r,i,l,a;return s=new kt({props:{component:Ff,id:se.widgetMessengerFrame,title:"Smartsupp widget messenger",frameStyle:Ft()}}),{c(){t=C("div"),M(s.$$.fragment),f(t,"data-testid",se.widgetMessengerFrame),U(t,"transition","max-height 250ms ease-in-out, width 250ms ease-in-out")},m(c,d){A(c,t,d),O(s,t,null),e[5](t),i=!0,l||(a=Tt(n=Fd.call(null,t,e[2])),l=!0)},p(c,d){n&&Jo(n.update)&&d&4&&n.update.call(null,c[2])},i(c){i||(p(s.$$.fragment,c),ve(()=>{i&&(r&&r.end(1),o=We(t,ue,{y:20,duration:200}),o.start())}),i=!0)},o(c){m(s.$$.fragment,c),o&&o.invalidate(),r=He(t,ue,{y:10,duration:150}),i=!1},d(c){c&&T(t),k(s),e[5](null),c&&r&&r.end(),l=!1,a()}}}function If(e){let t,s,n=e[1]&&cs(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[1]?n?(n.p(o,r),r&2&&p(n,1)):(n=cs(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}const us="MobileWidgetMessengerOpen";function Lf(e,t,s){let n,o,r;q(e,su,d=>s(1,n=d)),q(e,Le,d=>s(2,o=d)),q(e,Dd,d=>s(4,r=d));let i;const l=(d,u)=>{if(!i)return;const{width:g,height:y}=Cd(d,u);s(0,i.style.maxHeight=xe(y)?y:ft(y),i),s(0,i.style.width=xe(g)?g:ft(g),i),s(0,i.style.height=d?"100%":"calc(100% - 40px)",i)};let a=!1;function c(d){Ue[d?"unshift":"push"](()=>{i=d,s(0,i)})}return e.$$.update=()=>{if(e.$$.dirty&21&&i&&l(o,r),e.$$.dirty&14&&o){if(n&&!a){const d=Pe().createElement("style");d.textContent="* {overflow: hidden}",d.className=us,Pe().head.appendChild(d),s(3,a=!0)}if(!n&&a){const d=Pe().head.getElementsByClassName(us);for(let u=0;u<d.length;u++)Pe().head.removeChild(d[u]);s(3,a=!1)}}},[i,n,o,a,r,c]}class Rf extends G{constructor(t){super(),N(this,t,Lf,If,x,{})}}function Bf(e){let t,s='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/>',n=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},e[0]],o={};for(let r=0;r<n.length;r+=1)o=ne(o,n[r]);return{c(){t=Me("svg"),ct(t,o)},m(r,i){A(r,t,i),t.innerHTML=s},p(r,[i]){ct(t,o=pt(n,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},i&1&&r[0]]))},i:W,o:W,d(r){r&&T(t)}}}function Df(e,t,s){return e.$$set=n=>{s(0,t=ne(ne({},t),ut(n)))},t=ut(t),[t]}class zo extends G{constructor(t){super(),N(this,t,Df,Bf,x,{})}}function Pf(e){let t,s;return{c(){t=C("img"),dt(t.src,s=e[1])||f(t,"src",s),f(t,"alt","Agent avatar"),f(t,"class","rounded-full"),f(t,"data-testid",se.avatarAgent),R(t,"w-6",e[0]==="sm"),R(t,"h-6",e[0]==="sm"),R(t,"w-8",e[0]==="md"),R(t,"h-8",e[0]==="md"),R(t,"w-11",e[0]==="lg"),R(t,"h-11",e[0]==="lg")},m(n,o){A(n,t,o)},p(n,[o]){o&2&&!dt(t.src,s=n[1])&&f(t,"src",s),o&1&&R(t,"w-6",n[0]==="sm"),o&1&&R(t,"h-6",n[0]==="sm"),o&1&&R(t,"w-8",n[0]==="md"),o&1&&R(t,"h-8",n[0]==="md"),o&1&&R(t,"w-11",n[0]==="lg"),o&1&&R(t,"h-11",n[0]==="lg")},i:W,o:W,d(n){n&&T(t)}}}function $f(e,t,s){let{avatar:n}=t,{size:o="md"}=t,r;return e.$$set=i=>{"avatar"in i&&s(2,n=i.avatar),"size"in i&&s(0,o=i.size)},e.$$.update=()=>{e.$$.dirty&4&&s(1,r=Ma(n))},[o,r,n]}class Wo extends G{constructor(t){super(),N(this,t,$f,Pf,x,{avatar:2,size:0})}}const Gf={id:"",avatar:"",description:"",disabled:!1,fullname:"",groups:[],status:"online"},Nf=E([xs,Ea,Zt,Ws],([e,t,s,n])=>s.length>0?[...s].reverse():n?t.length===0?[Gf]:t:e);function ds(e,t,s){const n=e.slice();return n[3]=t[s].id,n[4]=t[s].avatar,n}function fs(e,t){let s,n,o,r,i,l,a;return n=new Wo({props:{avatar:t[4],size:t[0]}}),{key:e,first:null,c(){s=C("div"),M(n.$$.fragment),o=z(),f(s,"class",r=Te(`avatar-group-item avatar-${t[0]} transition-all-400`)+" svelte-sm867b"),R(s,"-group-hover:not-first:m-x-1",!ye()),this.first=s},m(c,d){A(c,s,d),O(n,s,null),v(s,o),a=!0},p(c,d){t=c;const u={};d&2&&(u.avatar=t[4]),d&1&&(u.size=t[0]),n.$set(u),(!a||d&1&&r!==(r=Te(`avatar-group-item avatar-${t[0]} transition-all-400`)+" svelte-sm867b"))&&f(s,"class",r),(!a||d&1)&&R(s,"-group-hover:not-first:m-x-1",!ye())},i(c){a||(p(n.$$.fragment,c),ve(()=>{a&&(l&&l.end(1),i=We(s,ue,{duration:300,x:-10}),i.start())}),a=!0)},o(c){m(n.$$.fragment,c),i&&i.invalidate(),l=He(s,ue,{duration:150,x:-10}),a=!1},d(c){c&&T(s),k(n),c&&l&&l.end()}}}function xf(e){let t,s=[],n=new Map,o,r=e[1];const i=l=>l[3];for(let l=0;l<r.length;l+=1){let a=ds(e,r,l),c=i(a);n.set(c,s[l]=fs(c,a))}return{c(){t=C("div");for(let l=0;l<s.length;l+=1)s[l].c();f(t,"class","group flex-center flex-shrink-0"),f(t,"data-testid",se.avatarGroup)},m(l,a){A(l,t,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);o=!0},p(l,[a]){a&3&&(r=l[1],Q(),s=Qo(s,a,i,1,l,r,n,t,er,fs,null,ds),ee())},i(l){if(!o){for(let a=0;a<r.length;a+=1)p(s[a]);o=!0}},o(l){for(let a=0;a<s.length;a+=1)m(s[a]);o=!1},d(l){l&&T(t);for(let a=0;a<s.length;a+=1)s[a].d()}}}const Uf=3;function Vf(e,t,s){let n;q(e,Nf,i=>s(2,n=i));let{size:o="md"}=t,r=[];return e.$$set=i=>{"size"in i&&s(0,o=i.size)},e.$$.update=()=>{e.$$.dirty&4&&n.length>0&&s(1,r=n.slice(0,Uf))},[o,r,n]}class zf extends G{constructor(t){super(),N(this,t,Vf,xf,x,{size:0})}}function Wf(e){let t,s,n,o,r=[{role:"status"},{class:o="inline "+e[0]+" "+e[1]+" text-white text-opacity-20 animate-spin"},{viewBox:"0 0 100 101"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[2]],i={};for(let l=0;l<r.length;l+=1)i=ne(i,r[l]);return{c(){t=Me("svg"),s=Me("path"),n=Me("path"),f(s,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),f(s,"fill","currentColor"),f(n,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),f(n,"fill","currentFill"),ct(t,i)},m(l,a){A(l,t,a),v(t,s),v(t,n)},p(l,[a]){ct(t,i=pt(r,[{role:"status"},a&3&&o!==(o="inline "+l[0]+" "+l[1]+" text-white text-opacity-20 animate-spin")&&{class:o},{viewBox:"0 0 100 101"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&l[2]]))},i:W,o:W,d(l){l&&T(t)}}}function Hf(e,t,s){let n,o;const r=["color","size"];let i=ke(t,r),{color:l="primary"}=t,{size:a="current"}=t;const c={primary:"fill-primary-button",primaryContent:"fill-primary-button-content"},d={current:"w-[1.2em] h-[1.2em]",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return e.$$set=u=>{t=ne(ne({},t),ut(u)),s(2,i=ke(t,r)),"color"in u&&s(3,l=u.color),"size"in u&&s(4,a=u.size)},e.$$.update=()=>{e.$$.dirty&8&&s(1,n=c[l??"primary"]),e.$$.dirty&16&&s(0,o=d[a??"current"])},[o,n,i,l,a]}class jf extends G{constructor(t){super(),N(this,t,Hf,Wf,x,{color:3,size:4})}}function gs(e){let t,s,n;const o=[{"aria-hidden":"true"},{"aria-label":e[2]},e[7]];var r=e[6];function i(l){let a={};for(let c=0;c<o.length;c+=1)a=ne(a,o[c]);return{props:a}}return r&&(s=lt(r,i())),{c(){t=C("span"),s&&M(s.$$.fragment),f(t,"class","mr-2")},m(l,a){A(l,t,a),s&&O(s,t,null),n=!0},p(l,a){const c=a&132?pt(o,[o[0],a&4&&{"aria-label":l[2]},a&128&&tr(l[7])]):{};if(a&64&&r!==(r=l[6])){if(s){Q();const d=s;m(d.$$.fragment,1,0,()=>{k(d,1)}),ee()}r?(s=lt(r,i()),M(s.$$.fragment),p(s.$$.fragment,1),O(s,t,null)):s=null}else r&&s.$set(c)},i(l){n||(s&&p(s.$$.fragment,l),n=!0)},o(l){s&&m(s.$$.fragment,l),n=!1},d(l){l&&T(t),s&&k(s)}}}function ps(e){let t;const s=e[14].default,n=wt(s,e,e[13],null);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),t=!0},p(o,r){n&&n.p&&(!t||r&8192)&&Ct(n,s,o,o[13],t?At(s,o[13],r,null):St(o[13]),null)},i(o){t||(p(n,o),t=!0)},o(o){m(n,o),t=!1},d(o){n&&n.d(o)}}}function Kf(e){let t,s,n,o,r,i,l=e[6]&&gs(e),a=!e[4]&&ps(e),c=[{type:"button"},{tabindex:"0"},e[10],{class:n=`btn btn-${e[0]} btn-${e[1]} text-base`},{disabled:e[8]},{"data-testid":e[5]}],d={};for(let u=0;u<c.length;u+=1)d=ne(d,c[u]);return{c(){t=C("button"),l&&l.c(),s=z(),a&&a.c(),$t(t,d),R(t,"text-sm",!e[9]),R(t,"btn-disabled",e[8]),R(t,"w-full",!!e[3]),R(t,"cursor-auto",ye()),R(t,"cursor-pointer",!ye()),R(t,"svelte-xmvacy",!0)},m(u,g){A(u,t,g),l&&l.m(t,null),v(t,s),a&&a.m(t,null),t.autofocus&&t.focus(),o=!0,r||(i=ge(t,"click",e[15]),r=!0)},p(u,[g]){u[6]?l?(l.p(u,g),g&64&&p(l,1)):(l=gs(u),l.c(),p(l,1),l.m(t,s)):l&&(Q(),m(l,1,1,()=>{l=null}),ee()),u[4]?a&&(Q(),m(a,1,1,()=>{a=null}),ee()):a?(a.p(u,g),g&16&&p(a,1)):(a=ps(u),a.c(),p(a,1),a.m(t,null)),$t(t,d=pt(c,[{type:"button"},{tabindex:"0"},g&1024&&u[10],(!o||g&3&&n!==(n=`btn btn-${u[0]} btn-${u[1]} text-base`))&&{class:n},(!o||g&256)&&{disabled:u[8]},(!o||g&32)&&{"data-testid":u[5]}])),R(t,"text-sm",!u[9]),R(t,"btn-disabled",u[8]),R(t,"w-full",!!u[3]),R(t,"cursor-auto",ye()),R(t,"cursor-pointer",!ye()),R(t,"svelte-xmvacy",!0)},i(u){o||(p(l),p(a),o=!0)},o(u){m(l),m(a),o=!1},d(u){u&&T(t),l&&l.d(),a&&a.d(),r=!1,i()}}}function qf(e,t,s){let n;const o=["variant","size","icon","iconDescription","disabled","isBlock","isLoading","testId"];let r=ke(t,o),i;q(e,Le,D=>s(9,i=D));let{$$slots:l={},$$scope:a}=t,{variant:c="primary"}=t,{size:d="md"}=t,{icon:u=void 0}=t,{iconDescription:g=void 0}=t,{disabled:y=void 0}=t,{isBlock:S=void 0}=t,{isLoading:h=void 0}=t,{testId:w=void 0}=t,_=u,B={};function $(D){De.call(this,e,D)}return e.$$set=D=>{t=ne(ne({},t),ut(D)),s(10,r=ke(t,o)),"variant"in D&&s(0,c=D.variant),"size"in D&&s(1,d=D.size),"icon"in D&&s(11,u=D.icon),"iconDescription"in D&&s(2,g=D.iconDescription),"disabled"in D&&s(12,y=D.disabled),"isBlock"in D&&s(3,S=D.isBlock),"isLoading"in D&&s(4,h=D.isLoading),"testId"in D&&s(5,w=D.testId),"$$scope"in D&&s(13,a=D.$$scope)},e.$$.update=()=>{e.$$.dirty&2064&&(h?(s(6,_=jf),s(7,B={color:"primaryContent"})):(s(6,_=u),s(7,B={}))),e.$$.dirty&4112&&s(8,n=!!y||!!h)},[c,d,g,S,h,w,_,B,n,i,r,u,y,a,l,$]}class Xf extends G{constructor(t){super(),N(this,t,qf,Kf,x,{variant:0,size:1,icon:11,iconDescription:2,disabled:12,isBlock:3,isLoading:4,testId:5})}}function Zf(e){let t,s,n,o,r,i,l;var a=e[0];function c(g){return{props:{width:"1em",height:"1em",style:`transform: scale(${g[7]}) scaleX(${g[8]});`}}}a&&(n=lt(a,c(e)));let d=[{type:"button"},{tabindex:"0"},e[9],{"aria-label":e[1]},{class:o=`btn btn-${e[4]} btn-${e[3]}`},{"data-testid":e[6]}],u={};for(let g=0;g<d.length;g+=1)u=ne(u,d[g]);return{c(){t=C("button"),s=C("div"),n&&M(n.$$.fragment),f(s,"class","w-full h-full flex items-center justify-center"),R(s,"animate-spin",e[2]==="spin"),$t(t,u),R(t,"btn-disabled",!!e[5]),R(t,"cursor-auto",ye()),R(t,"cursor-pointer",!ye()),R(t,"svelte-86h3fi",!0)},m(g,y){A(g,t,y),v(t,s),n&&O(n,s,null),t.autofocus&&t.focus(),r=!0,i||(l=ge(t,"click",_n(e[11])),i=!0)},p(g,[y]){const S={};if(y&128&&(S.style=`transform: scale(${g[7]}) scaleX(${g[8]});`),y&1&&a!==(a=g[0])){if(n){Q();const h=n;m(h.$$.fragment,1,0,()=>{k(h,1)}),ee()}a?(n=lt(a,c(g)),M(n.$$.fragment),p(n.$$.fragment,1),O(n,s,null)):n=null}else a&&n.$set(S);(!r||y&4)&&R(s,"animate-spin",g[2]==="spin"),$t(t,u=pt(d,[{type:"button"},{tabindex:"0"},y&512&&g[9],(!r||y&2)&&{"aria-label":g[1]},(!r||y&24&&o!==(o=`btn btn-${g[4]} btn-${g[3]}`))&&{class:o},(!r||y&64)&&{"data-testid":g[6]}])),R(t,"btn-disabled",!!g[5]),R(t,"cursor-auto",ye()),R(t,"cursor-pointer",!ye()),R(t,"svelte-86h3fi",!0)},i(g){r||(n&&p(n.$$.fragment,g),r=!0)},o(g){n&&m(n.$$.fragment,g),r=!1},d(g){g&&T(t),n&&k(n),i=!1,l()}}}function Yf(e,t,s){const n=["icon","iconDescription","iconOrientation","iconAnimation","size","variant","disabled","testId"];let o=ke(t,n),{icon:r}=t,{iconDescription:i}=t,{iconOrientation:l="right"}=t,{iconAnimation:a="none"}=t,{size:c="md"}=t,{variant:d="ghost"}=t,{disabled:u=void 0}=t,{testId:g=void 0}=t;const y=l==="right"?1:-1;let S=1.2;function h(w){De.call(this,e,w)}return e.$$set=w=>{t=ne(ne({},t),ut(w)),s(9,o=ke(t,n)),"icon"in w&&s(0,r=w.icon),"iconDescription"in w&&s(1,i=w.iconDescription),"iconOrientation"in w&&s(10,l=w.iconOrientation),"iconAnimation"in w&&s(2,a=w.iconAnimation),"size"in w&&s(3,c=w.size),"variant"in w&&s(4,d=w.variant),"disabled"in w&&s(5,u=w.disabled),"testId"in w&&s(6,g=w.testId)},e.$$.update=()=>{e.$$.dirty&8&&c==="xl"&&s(7,S=1.5)},[r,i,a,c,d,u,g,S,y,o,l,h]}class Ho extends G{constructor(t){super(),N(this,t,Yf,Zf,x,{icon:0,iconDescription:1,iconOrientation:10,iconAnimation:2,size:3,variant:4,disabled:5,testId:6})}}function Jf(e){let t,s,n=[{width:"1.2em"},{height:"1.2em"},{viewBox:"0 0 209 209"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{"xml:space":"preserve"},{"fill-rule":"evenodd"},{"clip-rule":"evenodd"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},e[0]],o={};for(let r=0;r<n.length;r+=1)o=ne(o,n[r]);return{c(){t=Me("svg"),s=Me("path"),f(s,"d","M177.954,104.163l-110.066,-0m110.066,-0l-138.95,69.4l28.884,-69.4l-28.884,-69.584l138.95,69.584Z"),U(s,"fill","none"),U(s,"fill-rule","nonzero"),U(s,"stroke","currentColor"),U(s,"stroke-width","17.38px"),ct(t,o)},m(r,i){A(r,t,i),v(t,s)},p(r,[i]){ct(t,o=pt(n,[{width:"1.2em"},{height:"1.2em"},{viewBox:"0 0 209 209"},{version:"1.1"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:xlink":"http://www.w3.org/1999/xlink"},{"xml:space":"preserve"},{"fill-rule":"evenodd"},{"clip-rule":"evenodd"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},i&1&&r[0]]))},i:W,o:W,d(r){r&&T(t)}}}function Qf(e,t,s){const n=[];let o=ke(t,n);return e.$$set=r=>{t=ne(ne({},t),ut(r)),s(0,o=ke(t,n))},[o]}class eg extends G{constructor(t){super(),N(this,t,Qf,Jf,x,{})}}function ms(e){let t,s,n,o,r=e[1].fullname+"",i,l;return s=new Wo({props:{avatar:e[1].avatar}}),{c(){t=C("div"),M(s.$$.fragment),n=z(),o=C("div"),i=Ve(r),f(t,"class","flex-center flex-shrink-0"),f(o,"class","ml-3 mr-10 font-bold truncate color-slate-800")},m(a,c){A(a,t,c),O(s,t,null),A(a,n,c),A(a,o,c),v(o,i),l=!0},p(a,c){const d={};c&2&&(d.avatar=a[1].avatar),s.$set(d),(!l||c&2)&&r!==(r=a[1].fullname+"")&&ze(i,r)},i(a){l||(p(s.$$.fragment,a),l=!0)},o(a){m(s.$$.fragment,a),l=!1},d(a){a&&T(t),k(s),a&&T(n),a&&T(o)}}}function tg(e){let t,s,n=e[1]&&ms(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[1]?n?(n.p(o,r),r&2&&p(n,1)):(n=ms(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function ng(e,t,s){let n,o,r=W,i=()=>(r(),r=nr(n,a=>s(1,o=a)),n);e.$$.on_destroy.push(()=>r());let{agentId:l}=t;return e.$$set=a=>{"agentId"in a&&s(2,l=a.agentId)},e.$$.update=()=>{e.$$.dirty&4&&i(s(0,n=Aa(l)))},[n,o,l]}class sg extends G{constructor(t){super(),N(this,t,ng,tg,x,{agentId:2})}}function hs(e){let t,s,n,o,r,i,l=e[0].content.text+"",a,c,d,u,g,y,S,h,w,_;const B=[rg,og],$=[];function D(L,K){return L[0].agentId?0:1}return n=D(e),o=$[n]=B[n](e),u=new Xf({props:{variant:"outline",size:"lg",icon:eg,isBlock:!0,$$slots:{default:[ig]},$$scope:{ctx:e}}}),S=new Ho({props:{icon:zo,iconDescription:"Close"}}),S.$on("click",e[5]),{c(){t=C("div"),s=C("div"),o.c(),r=z(),i=C("div"),a=Ve(l),c=z(),d=C("div"),M(u.$$.fragment),g=z(),y=C("div"),M(S.$$.fragment),f(s,"class","flex items-center mb-4"),f(i,"class","text-sm leading-[22px] line-clamp-5 whitespace-pre-wrap color-slate-800"),f(d,"class","mt-4"),f(y,"class","absolute top-2 right-2 text-gray-500"),f(t,"class","relative p-4 bg-white rounded-lg cursor-pointer")},m(L,K){A(L,t,K),v(t,s),$[n].m(s,null),v(t,r),v(t,i),v(i,a),v(t,c),v(t,d),O(u,d,null),v(t,g),v(t,y),O(S,y,null),e[9](t),h=!0,w||(_=[ge(t,"click",e[4]),ge(t,"mouseenter",e[6]),ge(t,"mouseleave",e[7])],w=!0)},p(L,K){let ae=n;n=D(L),n===ae?$[n].p(L,K):(Q(),m($[ae],1,1,()=>{$[ae]=null}),ee(),o=$[n],o?o.p(L,K):(o=$[n]=B[n](L),o.c()),p(o,1),o.m(s,null)),(!h||K&1)&&l!==(l=L[0].content.text+"")&&ze(a,l);const fe={};K&4108&&(fe.$$scope={dirty:K,ctx:L}),u.$set(fe)},i(L){h||(p(o),p(u.$$.fragment,L),p(S.$$.fragment,L),h=!0)},o(L){m(o),m(u.$$.fragment,L),m(S.$$.fragment,L),h=!1},d(L){L&&T(t),$[n].d(),k(u),k(S),e[9](null),w=!1,Ht(_)}}}function og(e){let t,s;return t=new zf({}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p:W,i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function rg(e){let t,s;return t=new sg({props:{agentId:e[0].agentId}}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p(n,o){const r={};o&1&&(r.agentId=n[0].agentId),t.$set(r)},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function ig(e){let t=e[3](e[2])+"",s;return{c(){s=Ve(t)},m(n,o){A(n,s,o)},p(n,o){o&12&&t!==(t=n[3](n[2])+"")&&ze(s,t)},d(n){n&&T(s)}}}function ag(e){let t,s,n=e[0]&&hs(e);return{c(){t=C("div"),n&&n.c()},m(o,r){A(o,t,r),n&&n.m(t,null),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&p(n,1)):(n=hs(o),n.c(),p(n,1),n.m(t,null)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){o&&T(t),n&&n.d()}}}function lg(e,t,s){let n,o,r,i;q(e,dl,h=>s(8,o=h)),q(e,In,h=>s(0,r=h)),q(e,ce,h=>s(3,i=h));let l,a=()=>No.set(l.getBoundingClientRect().height);Fe(()=>{a(),re().addEventListener("visibilitychange",a)}),bn(()=>{re().removeEventListener("visibilitychange",a)});const c=()=>{en()},d=()=>{Hs()},u=()=>{gn.set(!0)},g=()=>{gn.set(!1)},y=async()=>{await vs(),a()};function S(h){Ue[h?"unshift":"push"](()=>{l=h,s(1,l)})}return e.$$.update=()=>{e.$$.dirty&1&&r&&y(),e.$$.dirty&256&&s(2,n=o?"trigger.replyButton":"trigger.openChatButton")},[r,l,n,i,c,d,u,g,o,S]}class cg extends G{constructor(t){super(),N(this,t,lg,ag,x,{})}}function bs(e){let t,s,n,o,r,i,l;return s=new kt({props:{component:cg,id:se.widgetPopupFrame,title:"Smartsupp widget popup",frameStyle:Ft()}}),{c(){t=C("div"),M(s.$$.fragment),U(t,"height","calc(100% - 40px)"),U(t,"border-radius","12px"),U(t,"transition","box-shadow 0.2s ease-in-out"),U(t,"transition","max-height 250ms ease-in-out"),f(t,"data-testid",se.widgetPopupFrame),U(t,"width",300),U(t,"box-shadow",`rgba(0, 0, 0, ${e[1]}) 0px 3px 16px`)},m(a,c){A(a,t,c),O(s,t,null),e[5](t),r=!0,i||(l=Tt(Id.call(null,t)),i=!0)},p(a,c){c&2&&U(t,"box-shadow",`rgba(0, 0, 0, ${a[1]}) 0px 3px 16px`)},i(a){r||(p(s.$$.fragment,a),ve(()=>{r&&(o&&o.end(1),n=We(t,ue,{y:20,delay:300,duration:400}),n.start())}),r=!0)},o(a){m(s.$$.fragment,a),n&&n.invalidate(),o=He(t,ue,{y:10,duration:250}),r=!1},d(a){a&&T(t),k(s),e[5](null),a&&o&&o.end(),i=!1,l()}}}function ug(e){let t,s,n=e[2]&&bs(e);return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[2]?n?(n.p(o,r),r&4&&p(n,1)):(n=bs(o),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function dg(e,t,s){let n,o,r;q(e,gn,d=>s(3,n=d)),q(e,No,d=>s(4,o=d)),q(e,lu,d=>s(2,r=d));let i;const l=d=>{s(0,i.style.maxHeight=`${d}px`,i)};let a;function c(d){Ue[d?"unshift":"push"](()=>{i=d,s(0,i)})}return e.$$.update=()=>{e.$$.dirty&17&&i&&l(o),e.$$.dirty&8&&s(1,a=n?.28:.16)},[i,a,r,n,o,c]}class fg extends G{constructor(t){super(),N(this,t,dg,ug,x,{})}}function gg(e){let t,s,n,o,r,i,l,a,c;return{c(){t=C("div"),s=C("div"),o=z(),r=C("div"),l=z(),a=C("div"),f(s,"class",n=Te(`typing-indicator ${e[0]} indicator-color-${e[1]} animate-typing`)+" svelte-13wgl1n"),U(s,"animation-iteration-count",e[2]),f(r,"class",i=Te(`typing-indicator ${e[0]} indicator-color-${e[1]} typing-indicator-second animate-typing`)+" svelte-13wgl1n"),U(r,"animation-iteration-count",e[2]),f(a,"class",c=Te(`typing-indicator ${e[0]} indicator-color-${e[1]} typing-indicator-third animate-typing`)+" svelte-13wgl1n"),U(a,"animation-iteration-count",e[2]),f(t,"class","flex p-2")},m(d,u){A(d,t,u),v(t,s),v(t,o),v(t,r),v(t,l),v(t,a)},p(d,[u]){u&3&&n!==(n=Te(`typing-indicator ${d[0]} indicator-color-${d[1]} animate-typing`)+" svelte-13wgl1n")&&f(s,"class",n),u&4&&U(s,"animation-iteration-count",d[2]),u&3&&i!==(i=Te(`typing-indicator ${d[0]} indicator-color-${d[1]} typing-indicator-second animate-typing`)+" svelte-13wgl1n")&&f(r,"class",i),u&4&&U(r,"animation-iteration-count",d[2]),u&3&&c!==(c=Te(`typing-indicator ${d[0]} indicator-color-${d[1]} typing-indicator-third animate-typing`)+" svelte-13wgl1n")&&f(a,"class",c),u&4&&U(a,"animation-iteration-count",d[2])},i:W,o:W,d(d){d&&T(t)}}}function pg(e,t,s){let n,{size:o="md"}=t,{color:r="black"}=t,{iterations:i=void 0}=t;return e.$$set=l=>{"size"in l&&s(0,o=l.size),"color"in l&&s(1,r=l.color),"iterations"in l&&s(3,i=l.iterations)},e.$$.update=()=>{e.$$.dirty&8&&s(2,n=i??"infinite")},[o,r,n,i]}class mg extends G{constructor(t){super(),N(this,t,pg,gg,x,{size:0,color:1,iterations:3})}}function hg(e){let t,s,n;return s=new mg({props:{iterations:2}}),{c(){t=C("div"),M(s.$$.fragment),f(t,"class","flex-center h-full bg-white rounded-lg")},m(o,r){A(o,t,r),O(s,t,null),n=!0},p:W,i(o){n||(p(s.$$.fragment,o),n=!0)},o(o){m(s.$$.fragment,o),n=!1},d(o){o&&T(t),k(s)}}}class bg extends G{constructor(t){super(),N(this,t,null,hg,x,{})}}function _s(e){let t,s,n,o,r,i,l;return s=new kt({props:{component:bg,id:se.widgetTypingFrame,title:"Smartsupp widget typing",frameStyle:Ft()}}),{c(){t=C("div"),M(s.$$.fragment),U(t,"box-shadow","rgba(0, 0, 0, 0.16) 0px 3px 16px"),U(t,"border-radius","24px"),f(t,"data-testid",se.widgetTypingFrame),U(t,"height",40),U(t,"width",70)},m(a,c){A(a,t,c),O(s,t,null),r=!0,i||(l=Tt(Ld.call(null,t)),i=!0)},p:W,i(a){r||(p(s.$$.fragment,a),ve(()=>{r&&(o&&o.end(1),n=We(t,ue,{y:20,delay:300,duration:400}),n.start())}),r=!0)},o(a){m(s.$$.fragment,a),n&&n.invalidate(),o=He(t,ue,{y:10,duration:250}),r=!1},d(a){a&&T(t),k(s),a&&o&&o.end(),i=!1,l()}}}function _g(e){let t,s,n=e[0]&&_s();return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&p(n,1)):(n=_s(),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}function yg(e,t,s){let n;return q(e,au,o=>s(0,n=o)),[n]}class vg extends G{constructor(t){super(),N(this,t,yg,_g,x,{})}}const mn=I(null),wg=E([mn],([e])=>!!e);function Cg(e){let t,s,n,o,r,i;return{c(){t=C("video"),s=C("track"),n=C("source"),f(s,"kind","captions"),dt(n.src,o=e[1].attachment.url)||f(n,"src",o),t.controls=!0,f(t,"class","m-auto max-h-full max-w-full bg-black object-contain"),t.autoplay=!0,t.loop=!0},m(l,a){A(l,t,a),v(t,s),v(t,n),r||(i=[ge(t,"click",_n(e[6])),ge(t,"keypress",e[7])],r=!0)},p(l,a){a&2&&!dt(n.src,o=l[1].attachment.url)&&f(n,"src",o)},d(l){l&&T(t),r=!1,Ht(i)}}}function Sg(e){let t,s,n,o,r;return{c(){var i,l;t=C("img"),f(t,"class","m-auto max-h-full max-w-full select-none bg-black"),f(t,"width","auto"),f(t,"height","auto"),dt(t.src,s=(i=e[1])==null?void 0:i.attachment.url)||f(t,"src",s),f(t,"alt",n=(l=e[1])==null?void 0:l.attachment.fileName)},m(i,l){A(i,t,l),o||(r=[ge(t,"click",_n(e[4])),ge(t,"keypress",e[5])],o=!0)},p(i,l){var a,c;l&2&&!dt(t.src,s=(a=i[1])==null?void 0:a.attachment.url)&&f(t,"src",s),l&2&&n!==(n=(c=i[1])==null?void 0:c.attachment.fileName)&&f(t,"alt",n)},d(i){i&&T(t),o=!1,Ht(r)}}}function Ag(e){var D;let t,s,n,o,r=((D=e[1])==null?void 0:D.attachment.fileName)+"",i,l,a,c,d,u,g,y,S,h,w;c=new Ho({props:{icon:zo,iconDescription:"Close",size:"xl"}}),c.$on("click",e[8]);function _(L,K){var ae,fe;if(((ae=L[1])==null?void 0:ae.type)===ln.Image)return Sg;if(((fe=L[1])==null?void 0:fe.type)===ln.Video)return Cg}let B=_(e),$=B&&B(e);return{c(){t=C("div"),s=C("div"),n=C("div"),o=C("span"),i=Ve(r),l=z(),a=C("div"),M(c.$$.fragment),d=z(),u=C("div"),$&&$.c(),f(o,"class","whitespace-nowrap text-ellipsis overflow-hidden"),f(n,"class","flex-grow flex items-center text-md px-4 overflow-hidden"),f(a,"class","flex-shrink"),f(s,"class","flex-shrink flex flex-row w-full bg-black text-white"),f(u,"class","relative overflow-hidden flex-grow flex items-center bg-black/80 z-10"),R(u,"p-8",e[0]),R(u,"p-4",!e[0]),f(t,"class","w-full h-full flex flex-col")},m(L,K){A(L,t,K),v(t,s),v(s,n),v(n,o),v(o,i),v(s,l),v(s,a),O(c,a,null),v(t,d),v(t,u),$&&$.m(u,null),S=!0,h||(w=[ge(u,"click",e[9]),ge(u,"keypress",e[3])],h=!0)},p(L,[K]){var ae;(!S||K&2)&&r!==(r=((ae=L[1])==null?void 0:ae.attachment.fileName)+"")&&ze(i,r),B===(B=_(L))&&$?$.p(L,K):($&&$.d(1),$=B&&B(L),$&&($.c(),$.m(u,null))),(!S||K&1)&&R(u,"p-8",L[0]),(!S||K&1)&&R(u,"p-4",!L[0])},i(L){S||(p(c.$$.fragment,L),ve(()=>{S&&(y&&y.end(1),g=We(t,ue,{y:20,delay:300,duration:400}),g.start())}),S=!0)},o(L){m(c.$$.fragment,L),g&&g.invalidate(),y=He(t,ue,{y:10,duration:250}),S=!1},d(L){L&&T(t),k(c),$&&$.d(),L&&y&&y.end(),h=!1,Ht(w)}}}function Tg(e,t,s){let n,o,r;q(e,Or,S=>s(0,o=S)),q(e,mn,S=>s(1,r=S));const i=S=>{S==="overlay"&&!n||mn.set(null)};function l(S){De.call(this,e,S)}function a(S){De.call(this,e,S)}function c(S){De.call(this,e,S)}function d(S){De.call(this,e,S)}function u(S){De.call(this,e,S)}const g=()=>i("button"),y=()=>i("overlay");return e.$$.update=()=>{e.$$.dirty&1&&(n=o)},[o,r,i,l,a,c,d,u,g,y]}class Eg extends G{constructor(t){super(),N(this,t,Tg,Ag,x,{})}}function ys(e){let t,s,n,o,r,i,l;return s=new kt({props:{component:Eg,id:se.widgetImagePreview,title:"Smartsupp widget image preview",frameStyle:Ft(Og)}}),{c(){t=C("div"),M(s.$$.fragment),f(t,"data-testid",se.widgetImagePreview),U(t,"transition","max-height 250ms ease-in-out, width 250ms ease-in-out")},m(a,c){A(a,t,c),O(s,t,null),r=!0,i||(l=Tt(Rd.call(null,t)),i=!0)},p:W,i(a){r||(p(s.$$.fragment,a),ve(()=>{r&&(o&&o.end(1),n=We(t,ue,{y:20,delay:100,duration:250}),n.start())}),r=!0)},o(a){m(s.$$.fragment,a),n&&n.invalidate(),o=He(t,ue,{y:10,duration:250}),r=!1},d(a){a&&T(t),k(s),a&&o&&o.end(),i=!1,l()}}}function Mg(e){let t,s,n=e[0]&&ys();return{c(){n&&n.c(),t=_e()},m(o,r){n&&n.m(o,r),A(o,t,r),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&p(n,1)):(n=ys(),n.c(),p(n,1),n.m(t.parentNode,t)):n&&(Q(),m(n,1,1,()=>{n=null}),ee())},i(o){s||(p(n),s=!0)},o(o){m(n),s=!1},d(o){n&&n.d(o),o&&T(t)}}}const Og=e=>{e.style.position="fixed"};function kg(e,t,s){let n;return q(e,wg,o=>s(0,n=o)),[n]}class Fg extends G{constructor(t){super(),N(this,t,kg,Mg,x,{})}}function Ig(e){let t,s,n,o,r,i,l,a,c,d;return t=new vg({}),n=new fg({}),r=new cf({}),l=new Rf({}),c=new Fg({}),{c(){M(t.$$.fragment),s=z(),M(n.$$.fragment),o=z(),M(r.$$.fragment),i=z(),M(l.$$.fragment),a=z(),M(c.$$.fragment)},m(u,g){O(t,u,g),A(u,s,g),O(n,u,g),A(u,o,g),O(r,u,g),A(u,i,g),O(l,u,g),A(u,a,g),O(c,u,g),d=!0},i(u){d||(p(t.$$.fragment,u),p(n.$$.fragment,u),p(r.$$.fragment,u),p(l.$$.fragment,u),p(c.$$.fragment,u),d=!0)},o(u){m(t.$$.fragment,u),m(n.$$.fragment,u),m(r.$$.fragment,u),m(l.$$.fragment,u),m(c.$$.fragment,u),d=!1},d(u){k(t,u),u&&T(s),k(n,u),u&&T(o),k(r,u),u&&T(i),k(l,u),u&&T(a),k(c,u)}}}function Lg(e){let t,s;return t=new cd({props:{$$slots:{default:[Ig]},$$scope:{ctx:e}}}),{c(){M(t.$$.fragment)},m(n,o){O(t,n,o),s=!0},p(n,[o]){const r={};o&2&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){s||(p(t.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),s=!1},d(n){k(t,n)}}}function Rg(e,t,s){let n;return q(e,In,o=>s(0,n=o)),Fe(()=>{(async()=>{Hi(),await ie.initClient()})()}),gc(re()),e.$$.update=()=>{e.$$.dirty&1&&n&&Co()},[n]}class Bg extends G{constructor(t){super(),N(this,t,Rg,Lg,x,{})}}const rn=ur(window);window.widget=rn;P.init(rn.options);rn.installApi(td);Nn.setThemeColor(rn.options.color);Oo();pc();pl();new Bg({target:document.getElementById("app")});export{Tc as $,xc as A,Is as B,Xf as C,Sn as D,lp as E,qe as F,Se as G,Z as H,Ho as I,Fr as J,cp as K,dp as L,bd as M,gr as N,Ie as O,Kg as P,xg as Q,fp as R,jg as S,ep as T,gp as U,Ut as V,qg as W,zo as X,mc as Y,up as Z,Jt as _,Pg as a,Be as a$,jt as a0,ie as a1,X as a2,co as a3,ks as a4,Aa as a5,Wo as a6,mg as a7,Le as a8,zg as a9,Qg as aA,je as aB,un as aC,Fp as aD,Zt as aE,bt as aF,Ws as aG,Jg as aH,Nf as aI,zf as aJ,kp as aK,Op as aL,Sp as aM,$e as aN,Rs as aO,te as aP,Vt as aQ,vt as aR,Zg as aS,Qt as aT,$g as aU,yo as aV,Nt as aW,Ep as aX,Ar as aY,Jc as aZ,Tf as a_,Wg as aa,op as ab,sp as ac,rp as ad,ul as ae,Va as af,np as ag,tp as ah,Da as ai,Yg as aj,mn as ak,ln as al,Ug as am,Vg as an,Hg as ao,Pr as ap,rl as aq,mt as ar,xa as as,gl as at,be as au,Dd as av,vc as aw,Ap as ax,Vs as ay,ip as az,ye as b,nt as b0,xi as b1,Ds as b2,Bs as b3,oi as b4,Yr as b5,ii as b6,li as b7,ci as b8,fi as b9,_i as ba,yi as bb,Ai as bc,Ei as bd,Mi as be,ki as bf,$i as bg,Tp as bh,zc as bi,Dn as bj,Xg as bk,Mp as bl,eg as bm,no as bn,ap as bo,js as bp,se as c,Ir as d,_p as e,Gg as f,re as g,mo as h,bp as i,Or as j,yp as k,En as l,pp as m,mp as n,Fs as o,ft as p,Cp as q,wp as r,vp as s,ce as t,hp as u,we as v,P as w,Ng as x,de as y,Oe as z};
//# sourceMappingURL=main-b84d4b6e.js.map
